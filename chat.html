<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landing Page Cho Thu√™ Xe M√°y</title>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Cho Thu√™ Xe M√°y H√† N·ªôi",
  "image": "https://i.imgur.com/3cXnUuT.png",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "123 Ph·ªë Tr√†ng Ti·ªÅn",
    "addressLocality": "H√† N·ªôi",
    "postalCode": "100000",
    "addressCountry": "VN"
  },
  "telephone": "+84 912 345 678",
  "priceRange": "150k - 2 tri·ªáu/ng√†y",
  "url": "https://github.com/yourrepo",
  "sameAs": [
    "https://www.facebook.com/yourpage",
    "https://zalo.me/yourzalo"
  ],
  "serviceType": "Cho thu√™ xe m√°y",
  "review": [
    {
      "@type": "Review",
      "author": "Nguyen T.",
      "datePublished": "2025-01-01",
      "reviewBody": "D·ªãch v·ª• t·ªët, xe m·ªõi, gi√° h·ª£p l√Ω",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": 5,
        "bestRating": 5
      }
    }
  ]
}
</script>

<style>
body { font-family: Arial; margin:0; padding:0; background:#f0f0f0; }
h1,h2,h3{margin:0 0 10px 0;}
.container{max-width:900px;margin:20px auto;padding:10px;background:#fff;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1);}
ul{padding-left:20px;}
/* Chatbot */
#chatbotIcon { position: fixed; bottom: 20px; left: 20px; width:50px;height:50px; background:#ff4081; border-radius:50%; cursor:pointer; z-index:9999; display:flex; align-items:center; justify-content:center; color:#fff; font-size:24px; box-shadow:0 4px 15px rgba(0,0,0,0.2); transition: transform 0.2s;}
#chatbotIcon:active { transform: scale(0.9); }
#chatbot { position: fixed; bottom: 20px; left: 20px; width:320px; max-width:90%; height:450px; background:#fff; border-radius:20px; box-shadow:0 4px 25px rgba(0,0,0,0.25); display:flex; flex-direction:column; overflow:hidden; transform:translateY(100%); transition: transform 0.4s cubic-bezier(0.4,0,0.2,1); z-index:9999;}
#chatbot.show { transform:translateY(0); }
#chatHeader { background:#ff4081;color:#fff; padding:10px;font-weight:bold; display:flex; align-items:center;border-bottom:1px solid #ddd; cursor:grab;}
#chatHeader:active { cursor:grabbing; }
#chatHeader img{width:40px;height:40px;border-radius:50%;margin-right:10px;transition:transform 0.1s;}
#closeChat{margin-left:auto;cursor:pointer;font-weight:bold;font-size:18px;}
#chatMessages{flex:1;padding:10px;overflow-y:auto; display:flex; flex-direction:column;}
.bot, .user { padding:10px 15px; margin:5px 0; border-radius:20px; max-width:80%; position:relative;}
.bot{background:#e1f5fe;align-self:flex-start;}
.user{background:#c8e6c9;align-self:flex-end;}
#chatInput{display:flex;border-top:1px solid #ddd;}
#chatInput input{flex:1;border:none;padding:10px;outline:none;border-radius:0;}
#chatInput button{padding:10px 15px;background:#ff4081;color:#fff;border:none;cursor:pointer;}
.ballon{position:absolute;font-size:20px; animation:fly 1s ease-out forwards;}
@keyframes fly{0%{opacity:1;transform:translateY(0);}100%{opacity:0;transform:translateY(-40px);}}
</style>
</head>
<body>

<div class="container">
  <h1>Cho Thu√™ Xe M√°y H√† N·ªôi</h1>
  <p>D·ªãch v·ª• thu√™ xe m√°y nhanh ch√≥ng, ti·ªán l·ª£i, uy t√≠n. Gi√° t·ª´ 150k/ng√†y.</p>
  <h2>Danh s√°ch xe v√† gi√° tham kh·∫£o</h2>
  <ul>
    <li>Xe 50cc: 200k/ng√†y, 800k/tu·∫ßn, 1.8 tri·ªáu/th√°ng</li>
    <li>Xe s·ªë: 150k/ng√†y, 600k/tu·∫ßn, 1.2 tri·ªáu/th√°ng</li>
    <li>Xe ga: 200k/ng√†y, 900k/tu·∫ßn, 2 tri·ªáu/th√°ng</li>
    <li>Wave/Sirius: 150k/ng√†y, 600k/tu·∫ßn, 1.2 tri·ªáu/th√°ng</li>
    <li>Honda Vision/Airblade: 200k/ng√†y, 900k/tu·∫ßn, 2 tri·ªáu/th√°ng</li>
    <li>Xe ƒëi·ªán: 200k/ng√†y, 800k/tu·∫ßn, 1.5 tri·ªáu/th√°ng</li>
  </ul>
</div>

<div id="chatbotIcon">üí¨</div>
<div id="chatbot">
  <div id="chatHeader">
    <img id="botIcon" src="https://i.imgur.com/3cXnUuT.png" alt="Bot">
    ChatGPT Bot
    <span id="closeChat">√ó</span>
  </div>
  <div id="chatMessages"></div>
  <div id="chatInput">
    <input type="text" placeholder="Nh·∫≠p tin nh·∫Øn...">
    <button>G·ª≠i</button>
  </div>
</div>

<script>
// --- Chatbot ---
const chatbot = document.getElementById('chatbot');
const chatbotIcon = document.getElementById('chatbotIcon');
const closeChat = document.getElementById('closeChat');
const messages = document.getElementById('chatMessages');
const input = document.querySelector('#chatInput input');
const button = document.querySelector('#chatInput button');
const botIcon = document.getElementById('botIcon');

const priceData = [
  { xe:"50cc", day:200, week:800, month:1800 },
  { xe:"xe s·ªë", day:150, week:600, month:1200 },
  { xe:"xe ga", day:200, week:900, month:2000 },
  { xe:"xe ƒëi·ªán", day:200, week:800, month:1500 },
  { xe:"wave", day:150, week:600, month:1200 },
  { xe:"sirius", day:150, week:600, month:1200 },
  { xe:"honda vision", day:200, week:900, month:2000 },
  { xe:"airblade", day:200, week:900, month:2000 } // ƒê√£ s·ª≠a gi√° Airblade ƒë·ªÉ kh·ªõp v·ªõi Xe ga
];

chatbotIcon.addEventListener('click', ()=>{
  chatbot.classList.add('show');
  showBotMessage("Ch√†o b·∫°n! T√¥i l√† ChatGPT phi√™n b·∫£n Vi·ªát Nam üòé. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?");
});
closeChat.addEventListener('click', ()=>{ chatbot.classList.remove('show'); });

function showBotMessage(msg){
  // Hi·ªáu ·ª©ng "nh√°y" cho icon bot
  botIcon.style.transform="scaleY(0.1)";
  setTimeout(()=>{botIcon.style.transform="scaleY(1)";},150);
  
  const div=document.createElement('div');
  div.className='bot';
  div.textContent=msg;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
  
  // Hi·ªáu ·ª©ng bong b√≥ng üéâ
  const balloon=document.createElement('div');
  balloon.className='ballon';
  balloon.textContent="üéà‚ú®";
  balloon.style.left=Math.random()*80+"%";
  div.appendChild(balloon);
  setTimeout(()=>{div.removeChild(balloon);},1000);
}

function handleInput(){
  const userMsg=input.value.trim().toLowerCase();
  if(!userMsg) return;
  
  const div=document.createElement('div');
  div.className='user';
  div.textContent=input.value.trim();
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;

  let found=false;
  
  // 1. T√¨m lo·∫°i xe
  const selectedXe = priceData.find(x=> userMsg.includes(x.xe));
  
  // 2. T√¨m s·ªë l∆∞·ª£ng v√† lo·∫°i th·ªùi gian (ng√†y/tu·∫ßn/th√°ng)
  const regex = /(\d+)\s*(ng√†y|tu·∫ßn|th√°ng)/i;
  const match = userMsg.match(regex);
  let qty = match ? parseInt(match[1]) : 1;
  let type = match ? match[2] : "ng√†y"; // M·∫∑c ƒë·ªãnh l√† 1 ng√†y n·∫øu kh√¥ng t√¨m th·∫•y

  if(userMsg.includes("thu√™") || selectedXe){
    if(selectedXe){
      let price=0;
      let unitPrice = 0;
      
      // T√≠nh to√°n gi√° thu√™
      if(type==="ng√†y") {
        price=selectedXe.day*qty;
        unitPrice = selectedXe.day;
      }
      else if(type==="tu·∫ßn") {
        price=selectedXe.week*qty;
        unitPrice = selectedXe.week;
      }
      else if(type==="th√°ng") {
        price=selectedXe.month*qty;
        unitPrice = selectedXe.month;
      }
      
      // Chuy·ªÉn ƒë∆°n v·ªã gi√° t·ª´ "k" (ngh√¨n) th√†nh "tri·ªáu" n·∫øu c·∫ßn
      let priceText = price >= 1000 ? (price/1000).toFixed(1).replace(/\.0$/, '') + " tri·ªáu" : price + "k";
      
      showBotMessage(`Gi√° thu√™ ${selectedXe.xe} trong ${qty} ${type} l√† **${priceText}**. (Gi√° ƒë∆°n v·ªã: ${unitPrice}k/${type.slice(0, -1)}).
B·∫°n li√™n h·ªá qua Zalo ho·∫∑c Hotline ƒë·ªÉ ch√∫ng t√¥i b√°o gi√° ch√≠nh x√°c v√† ∆∞u ƒë√£i khi thu√™ d√†i ng√†y h∆°n!`);
      found=true;

    } else if (userMsg.includes("thu√™")){
      // N·∫øu c√≥ t·ª´ "thu√™" nh∆∞ng ch∆∞a r√µ xe, tr·∫£ l·ªùi chung chung
      showBotMessage("B·∫°n mu·ªën thu√™ xe lo·∫°i n√†o (xe ga, xe s·ªë, 50cc...) v√† thu√™ trong bao l√¢u (m·∫•y ng√†y, tu·∫ßn, th√°ng)?");
      found=true;
    }
  }

  if(!found){
    // Nh·∫≠n di·ªán c√°c t·ª´ kho√° ƒë∆°n gi·∫£n
    if(userMsg.includes("xin ch√†o") || userMsg.includes("hello") || userMsg.includes("hi")){
      showBotMessage("Ch√†o b·∫°n! T√¥i l√† ChatGPT phi√™n b·∫£n Vi·ªát Nam üòé. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?");
    } else if(userMsg.includes("gi√°") || userMsg.includes("b·∫£ng gi√°")){
      showBotMessage("Ch√∫ng t√¥i c√≥: Xe s·ªë (150k/ng√†y), Xe ga (200k/ng√†y), Xe 50cc (200k/ng√†y), Xe ƒëi·ªán (200k/ng√†y). B·∫°n mu·ªën thu√™ lo·∫°i n√†o v√† trong bao l√¢u?");
    } else if(userMsg.includes("c√≤n th·ª©c kh√¥ng")){
      showBotMessage("T√¥i l√† ChatGPT phi√™n b·∫£n kh√¥ng bao gi·ªù ng·ªß üòè");
    } else if(userMsg.includes("c·∫£m ∆°n")){
      showBotMessage("R·∫•t vui ƒë∆∞·ª£c ph·ª•c v·ª• b·∫°n! Ch√∫c b·∫°n m·ªôt ng√†y t·ªët l√†nh. üòä");
    } else {
      showBotMessage("Hmm‚Ä¶ t√¥i ch∆∞a hi·ªÉu c√¢u h·ªèi n√†y üòÖ. B·∫°n c√≥ th·ªÉ h·ªèi v·ªÅ **gi√° xe**, **thu√™ xe ga** hay **thu√™ xe s·ªë** kh√¥ng?");
    }
  }
  input.value='';
}

button.addEventListener('click', handleInput);
input.addEventListener('keydown',(e)=>{if(e.key==='Enter') handleInput();});

// ================= K√©o th·∫£ Chatbot (Drag Functionality) =================
let isDragging=false, offsetX=0, offsetY=0;
const header=document.getElementById('chatHeader');

header.addEventListener('mousedown', startDrag);
header.addEventListener('touchstart', startDrag);

function startDrag(e){
  // NgƒÉn ch·∫∑n vi·ªác ch·ªçn vƒÉn b·∫£n khi k√©o
  e.preventDefault(); 
  isDragging=true;
  const rect=chatbot.getBoundingClientRect();
  
  if(e.type==='touchstart'){
    offsetX=e.touches[0].clientX-rect.left;
    offsetY=e.touches[0].clientY-rect.top;
  } else {
    offsetX=e.clientX-rect.left;
    offsetY=e.clientY-rect.top;
  }
  
  // Thi·∫øt l·∫≠p v·ªã tr√≠ tuy·ªát ƒë·ªëi (absolute) ƒë·ªÉ c√≥ th·ªÉ di chuy·ªÉn
  chatbot.style.position = 'fixed'; 
  chatbot.style.bottom = 'auto'; // V√¥ hi·ªáu h√≥a 'bottom'
  chatbot.style.left = rect.left + 'px';
  chatbot.style.top = rect.top + 'px';

  document.addEventListener('mousemove', dragMove);
  document.addEventListener('mouseup', stopDrag);
  document.addEventListener('touchmove', dragMove, {passive: false}); // passive: false ƒë·ªÉ ngƒÉn ch·∫∑n cu·ªôn trang
  document.addEventListener('touchend', stopDrag);
}

function dragMove(e){
  if(!isDragging) return;
  
  let x, y;
  if(e.type.startsWith('touch')){
    e.preventDefault(); // NgƒÉn ch·∫∑n cu·ªôn trang khi ch·∫°m
    x=e.touches[0].clientX-offsetX;
    y=e.touches[0].clientY-offsetY;
  } else {
    x=e.clientX-offsetX;
    y=e.clientY-offsetY;
  }
  
  const maxX=window.innerWidth-chatbot.offsetWidth;
  const maxY=window.innerHeight-chatbot.offsetHeight;
  
  // Gi·ªõi h·∫°n v√πng di chuy·ªÉn
  chatbot.style.left=Math.min(Math.max(0,x),maxX)+'px';
  chatbot.style.top=Math.min(Math.max(0,y),maxY)+'px';
}

function stopDrag(){
  isDragging=false;
  document.removeEventListener('mousemove',dragMove);
  document.removeEventListener('mouseup',stopDrag);
  document.removeEventListener('touchmove',dragMove);
  document.removeEventListener('touchend',stopDrag);
}
</script>
</body>
</html>
