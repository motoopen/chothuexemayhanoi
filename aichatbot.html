<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:site_name" content="Motoopen">
  <title>Motoopen AI Demo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f7;
      color: #222;
      line-height: 1.6;
    }
    header, footer {
      text-align: center;
      padding: 20px;
      background: #fff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    main {
      max-width: 800px;
      margin: 40px auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      padding: 20px;
    }
    footer {
      font-size: 13px;
      color: #555;
    }
  </style>
</head>
<body>
  <header>
    <h1>Motoopen</h1>
    <p>Thu√™ Xe M√°y H√† N·ªôi ‚Äî Gi√° R·∫ª, Giao T·∫≠n N∆°i</p>
  </header>

  <main>
    <p>D·ªãch v·ª• cho thu√™ xe m√°y gi√° r·∫ª t·∫°i H√† N·ªôi ‚Äì ∆Øu ƒë√£i ƒë·∫∑c bi·ªát khi thu√™ theo th√°ng! 
      ƒêa d·∫°ng d√≤ng xe Honda, Yamaha, xe 50cc v·ªõi m·ª©c c·ªçc nh·∫π nh√†ng. 
      Giao xe t·∫≠n n∆°i nhanh ch√≥ng, ti·ªán l·ª£i.</p>
    <p>Li√™n h·ªá ngay ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n nhanh qua Zalo ho·∫∑c hotline.</p>
  </main>

  <footer>
    ¬© 2025 Motoopen. Hotline: 0857 255 868
  </footer>

  <!-- === Motoopen AI v2.0.2 ‚Äî Mobile Smart Dock === -->
  <script>
  (function(){
    const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
    const embed=t=>{const m=new Map();t=t?.toLowerCase()||'';for(let i=0;i<=t.length-3;i++){const g=t.slice(i,i+3);m.set(g,(m.get(g)||0)+1);}return m;}
    const sim=(a,b)=>{const ks=new Set([...a.keys(),...b.keys()]);let dot=0,na=0,nb=0;for(const k of ks){const va=a.get(k)||0,vb=b.get(k)||0;dot+=va*vb;na+=va*va;nb+=vb*vb;}return dot/(Math.sqrt(na)*Math.sqrt(nb)+1e-12);}
    const retrieve=q=>STATE.corpus.map(s=>({text:s,score:sim(embed(q),embed(s))})).sort((a,b)=>b.score-a.score).slice(0,10);
    const STATE={corpus:[]};
    const extractCorpus=()=>{const t=[...document.body.innerText.split(/\n+/).filter(x=>x.length>30)];STATE.corpus=t;};
    const detectSite=()=>document.querySelector('meta[property="og:site_name"]')?.content||document.title||'website n√†y';
    async function generateAnswer(q){
      const cand=retrieve(q);
      if(!cand.length||cand[0].score<0.05)return "M√¨nh ch∆∞a th·∫•y th√¥ng tin r√µ r√†ng ü§î, b·∫°n th·ª≠ h·ªèi c·ª• th·ªÉ h∆°n nh√©!";
      return cand.slice(0,2).map(c=>c.text).join(' ');
    }

    function buildUI(){
      const site=detectSite();
      const root=document.createElement('div');
      root.id='motoai-root';
      root.innerHTML=`
        <style>
          #motoai-root{position:fixed;left:18px;bottom:200px;z-index:999999;pointer-events:none;}
          #motoai-bubble{pointer-events:auto;width:64px;height:64px;border-radius:20px;background:#007aff;color:#fff;display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;box-shadow:0 10px 24px rgba(0,0,0,0.2);}
          #motoai-panel{pointer-events:auto;position:fixed;left:18px;bottom:280px;width:360px;max-height:600px;border-radius:16px;overflow:hidden;background:rgba(255,255,255,0.9);backdrop-filter:blur(8px);box-shadow:0 18px 48px rgba(0,0,0,0.25);transform:translateY(100px) scale(.9);opacity:0;transition:all .35s cubic-bezier(.2,.9,.2,1);}
          #motoai-panel.open{opacity:1;transform:translateY(0) scale(1);}
          @media(max-width:600px){#motoai-root{bottom:190px;}#motoai-panel{width:calc(100% - 32px);left:16px;bottom:260px;}}
          #motoai-header{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;background:linear-gradient(90deg,#007aff,#00c4ff);color:#fff;font-weight:700;}
          #motoai-body{padding:10px;max-height:420px;overflow:auto;font-size:15px;}
          #motoai-input{display:flex;gap:8px;padding:10px;border-top:1px solid #ddd;background:rgba(255,255,255,0.8);}
          #motoai-input input{flex:1;padding:10px;border-radius:10px;border:1px solid #ccc;outline:none;}
          #motoai-input button{padding:10px 16px;background:#007aff;color:#fff;border:none;border-radius:10px;cursor:pointer;font-weight:600;}
          .m-msg{margin:6px 0;padding:8px 12px;border-radius:10px;max-width:85%;}
          .m-msg.user{margin-left:auto;background:#007aff;color:#fff;}
          .m-msg.bot{margin-right:auto;background:rgba(240,240,240,0.9);}
        </style>
        <div id="motoai-bubble"><svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M21 15a2 2 0 0 1-2 2H8l-5 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10z" fill="currentColor"/></svg></div>
        <div id="motoai-panel">
          <div id="motoai-header">${site} AI <button id="motoai-close" style="background:none;border:none;color:#fff;font-size:18px;cursor:pointer;">√ó</button></div>
          <div id="motoai-body"></div>
          <div id="motoai-input"><input id="motoai-input-el" placeholder="Nh·∫≠p c√¢u h·ªèi..."/><button id="motoai-send">G·ª≠i</button></div>
        </div>`;
      document.body.appendChild(root);

      const panel=root.querySelector('#motoai-panel');
      const bubble=root.querySelector('#motoai-bubble');
      const input=panel.querySelector('#motoai-input-el');
      const send=panel.querySelector('#motoai-send');
      const body=panel.querySelector('#motoai-body');
      const close=panel.querySelector('#motoai-close');

      function addMsg(role,text){
        const d=document.createElement('div');
        d.className='m-msg '+(role==='user'?'user':'bot');
        d.textContent=text;
        body.appendChild(d);
        body.scrollTop=body.scrollHeight;
      }

      async function ask(q){
        if(!q.trim())return;
        addMsg('user',q);input.value='';
        const thinking=document.createElement('div');thinking.className='m-msg bot';thinking.textContent='ƒêang g√µ‚Ä¶';body.appendChild(thinking);
        try{const ans=await generateAnswer(q);thinking.remove();addMsg('bot',ans);}catch{thinking.textContent='L·ªói x·ª≠ l√Ω, th·ª≠ l·∫°i nh√©!';}
      }

      send.addEventListener('click',()=>ask(input.value));
      input.addEventListener('keydown',e=>{if(e.key==='Enter')ask(input.value);});
      bubble.addEventListener('click',()=>{panel.classList.add('open');bubble.style.display='none';setTimeout(()=>input.focus(),300);});
      close.addEventListener('click',()=>{panel.classList.remove('open');bubble.style.display='flex';});
      input.style.pointerEvents='auto'; send.style.pointerEvents='auto';
      addMsg('bot',`Xin ch√†o üëã! M√¨nh l√† ${site} AI ‚Äî tr·ª£ l√Ω ·∫£o c·ªßa trang. B·∫°n mu·ªën m√¨nh gi√∫p g√¨ n√†o?`);
    }

    extractCorpus(); buildUI();
  })();
  </script>
</body>
</html>
