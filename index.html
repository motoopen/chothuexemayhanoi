<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="google-site-verification" content="uyOY7KYlP7yQOypX5W3i_z-ffZoVvA2_SgldeoXqXmE" />
  <meta name="viewport" content="width=device-width,initial-scale=1" /><title>Thuê Xe Máy Hà Nội Giá Rẻ | Motoopen - Giao Tận Nơi</title>

  <meta name="robots" content="index, follow">

  <meta name="description" content="Thuê xe máy Hà Nội giá rẻ tại Motoopen. Xe số, xe ga, xe điện, giao tận nơi, cọc nhẹ, bảo dưỡng định kỳ. Giá thuê từ 150k/ngày, phù hợp khách du lịch và dài hạn." />

  <link rel="canonical" href="https://motoopen.github.io/chothuexemayhanoi/">

  <link rel="icon" href="https://i.postimg.cc/PrKmHvJX/IMG-5272.jpg" />
  <link rel="apple-touch-icon" href="https://i.postimg.cc/PrKmHvJX/IMG-5272.jpg">
  <meta name="theme-color" content="#007aff">
  <meta name="msapplication-TileColor" content="#007aff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <meta property="og:title" content="Thuê Xe Máy Hà Nội Giá Rẻ | Motoopen">
  <meta property="og:description" content="Dịch vụ thuê xe máy Hà Nội: Xe số, xe ga, xe điện. Giao tận nơi, cọc nhẹ, bảo dưỡng định kỳ. Giá thuê từ 150k/ngày.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://motoopen.github.io/chothuexemayhanoi">
  <meta property="og:image" content="https://i.postimg.cc/brsmsj5N/IMG-5215.jpg">
  <meta property="og:site_name" content="Motoopen">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Thuê Xe Máy Hà Nội Giá Rẻ | Motoopen">
  <meta name="twitter:description" content="Dịch vụ thuê xe máy Hà Nội: Xe số, xe ga, xe điện. Giao tận nơi, cọc nhẹ, bảo dưỡng định kỳ. Giá thuê từ 150k/ngày.">
  <meta name="twitter:image" content="https://i.postimg.cc/brsmsj5N/IMG-5215.jpg">
  <meta name="twitter:site" content="@MotoopenVN">
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://motoopen.github.io/chothuexemayhanoi/#website",
      "url": "https://motoopen.github.io/chothuexemayhanoi/",
      "name": "Motoopen - Thuê Xe Máy Hà Nội",
      "publisher": {
        "@id": "https://motoopen.github.io/chothuexemayhanoi/#organization"
      }
    },
    {
      "@type": "Organization",
      "@id": "https://motoopen.github.io/chothuexemayhanoi/#organization",
      "name": "Motoopen",
      "url": "https://motoopen.github.io/chothuexemayhanoi/",
      "logo": "https://i.postimg.cc/brsmsj5N/IMG-5215.jpg",
      "sameAs": [
        "https://m.facebook.com/chothuexemayphoco/",
        "https://m.facebook.com/chothuexemay0857255868/",
        "https://m.facebook.com/chothuexemaycongtan/",
        "https://m.facebook.com/chothuexemaythanhxuan/",
        "https://m.facebook.com/chothuexemayquanhaibatrung/",
        "https://m.facebook.com/chothuexemaycaugiay/",
        "https://m.facebook.com/chothuexemayquanhoangmai/",
        "https://m.facebook.com/chothuexemayhoankiem/",
        "https://m.facebook.com/chothuexemaylongbien/",
        "https://m.facebook.com/chothuexemaytayho/",
        "https://m.facebook.com/chothuexemayohanoi1/",
        "https://m.facebook.com/chothuexeganmayhanoi/",
        "https://m.facebook.com/chothuexemaydongda/",
        "https://m.facebook.com/chothuexemaygiareohanoi/",
        "https://m.facebook.com/motoopenvn/",
        "https://m.facebook.com/xemayhanoi/",
        "https://www.instagram.com/motoopen/",
        "https://www.pinterest.com/motoopen12/",
        "https://www.tripadvisor.com.vn/Attraction_Review-g293924-d17515297-Reviews-Cho_Thue_Xe_May_Cong_Tan-Hanoi.html"
      ]
    },
    {
      "@type": "LocalBusiness",
      "@id": "https://motoopen.github.io/chothuexemayhanoi/#localbusiness",
      "name": "Motoopen - Thuê Xe Máy Hà Nội",
      "image": "https://i.postimg.cc/PrKmHvJX/IMG-5272.jpg",
      "url": "https://motoopen.github.io/chothuexemayhanoi/",
      "telephone": "+84857255868",
      "email": "motoopen12@gmail.com",
      "priceRange": "₫150000-₫2000000",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "114 Nguyễn Văn Cừ, Long Biên",
        "addressLocality": "Hà Nội",
        "postalCode": "100000",
        "addressCountry": "VN"
      },
      "openingHours": "Mo-Su 09:00-21:00",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 21.0409278,
        "longitude": 105.8692028
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "37"
      },
      "review": [
        {
          "@type": "Review",
          "author": { "@type": "Person", "name": "Thu Hà" },
          "datePublished": "2025-01-12",
          "reviewRating": { "@type": "Rating", "ratingValue": "5" },
          "reviewBody": "Thuê xe Vision 3 ngày, xe chạy êm — giao tận nơi phố cổ nhanh, phí nhẹ."
        },
        {
          "@type": "Review",
          "author": { "@type": "Person", "name": "Quang Lâm" },
          "datePublished": "2025-02-05",
          "reviewRating": { "@type": "Rating", "ratingValue": "5" },
          "reviewBody": "Giá thuê xe máy hợp lý, cọc nhẹ, nhân viên thân thiện. Ở Long Biên rất tiện."
        },
        {
          "@type": "Review",
          "author": { "@type": "Person", "name": "Gia Nội" },
          "datePublished": "2025-03-18",
          "reviewRating": { "@type": "Rating", "ratingValue": "5" },
          "reviewBody": "Mình thuê xe ga theo tháng ở Tây Hồ — giá tốt, xe mới, bảo dưỡng kỹ."
        },
        {
          "@type": "Review",
          "author": { "@type": "Person", "name": "Lan Tây" },
          "datePublished": "2025-04-02",
          "reviewRating": { "@type": "Rating", "ratingValue": "5" },
          "reviewBody": "Thuê xe máy Hà Nội dễ, nhận xe nhanh, giao tận nơi đúng giờ — rất đáng tiền."
        },
        {
          "@type": "Review",
          "author": { "@type": "Person", "name": "Hồ Đức" },
          "datePublished": "2025-04-15",
          "reviewRating": { "@type": "Rating", "ratingValue": "4" },
          "reviewBody": "Giá thuê xe máy 150k/ngày, thuê tháng từ 1 triệu — quá hợp lý, xe cực mới."
        }
      ]
    },
    {
      "@type": "Service",
      "serviceType": "Cho thuê xe máy Hà Nội",
      "provider": { "@id": "https://motoopen.github.io/chothuexemayhanoi/#localbusiness" },
      "areaServed": { "@type": "Place", "name": "Hà Nội" },
      "offers": {
        "@type": "Offer",
        "priceCurrency": "VND",
        "price": "150000",
        "url": "https://motoopen.github.io/chothuexemayhanoi/",
        "eligibleRegion": { "@type": "Place", "name": "Hà Nội" }
      }
    },
    {
      "@type": "FAQPage",
      "@id": "https://motoopen.github.io/chothuexemayhanoi/#faq",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Giá thuê xe máy theo ngày Hà Nội bao nhiêu?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Giá thuê xe máy từ 150.000 đến 200.000 VND/ngày, tùy loại xe."
          }
        },
        {
          "@type": "Question",
          "name": "Giá thuê xe máy theo tuần?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Giá thuê 1 tuần thường từ 600.000 – 900.000 VND tuỳ loại xe."
          }
        },
        {
          "@type": "Question",
          "name": "Giá thuê xe máy theo tháng bao nhiêu?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Giá thuê theo tháng rẻ, từ 1.000.000 đến 2.000.000 VND/tháng."
          }
        },
        {
          "@type": "Question",
          "name": "Thủ tục thuê xe máy?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Khách cần CMND/CCCD hoặc hộ chiếu và đặt cọc từ 1 đến 5 triệu tùy xe."
          }
        },
        {
          "@type": "Question",
          "name": "Có giao xe tận nơi ở Hà Nội không?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Có, Motoopen giao tận nơi ở các quận nội thành Hà Nội: Phố Cổ, Hoàn Kiếm, Long Biên, Tây Hồ, Ba Đình, Hai Bà Trưng, Cầu Giấy, Hoàng Mai."
          }
        }
      ]
    }
  ]
}
</script>
  
  <style>
    :root{
      /* LIGHT MODE */
      --maxw:1100px;
      --bg:#f5f5f7;
      --surface:#ffffff;
      --text:#1d1d1f;
      --muted:#6e6e73;
      --accent:#007aff;
      --accent-2:#2bc76f;
      --glass-border: rgba(220,220,215,0.6);
      --card-radius:14px;
      --nav-gap:12px;
      /* Biến màu cho Quick Call */
      --quick-main-start: #007aff;
      --quick-main-end: #00d4ff;
      --quick-sub-start: #2bc76f;
      --quick-sub-end: #5aff9e;
      --topbar-bg: rgba(255,255,255,0.78);
      --topbar-scrolled-bg: rgba(255,255,255,0.92);
      --drawer-bg: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,252,0.96));
      --hero-bg: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,245,247,0.98));
      --table-wrap-bg: rgba(255,255,255,0.74);
      --table-head-bg: rgba(250,250,252,0.9);
      --review-card-bg: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,252,0.98));
      --review-overlay-bg: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.85));
      --faq-a-bg: linear-gradient(180deg, #fff, #fcfcfd);
      --footer-bg: rgba(255,255,255,0.72);
    }
    /* DARK MODE OVERRIDES */
    body.dark {
      --bg: #1C1C1E; /* Apple Dark */
      --surface: #2C2C2E;
      --text: #F2F2F7;
      --muted: #8E8E93;
      --accent: #0A84FF; /* Apple Blue Dark */
      --accent-2: #30D158; /* Apple Green Dark */
      --glass-border: rgba(60,60,67,0.6);
      --topbar-bg: rgba(28,28,30,0.78);
      --topbar-scrolled-bg: rgba(28,28,30,0.92);
      --drawer-bg: linear-gradient(180deg, rgba(28,28,30,0.98), rgba(35,35,37,0.96));
      --hero-bg: linear-gradient(180deg, rgba(28,28,30,0.98), rgba(35,35,37,0.98));
      --table-wrap-bg: rgba(28,28,30,0.74);
      --table-head-bg: rgba(35,35,37,0.9);
      --review-card-bg: linear-gradient(180deg, rgba(44,44,46,0.98), rgba(35,35,37,0.98));
      --review-overlay-bg: linear-gradient(180deg, rgba(28,28,30,0.6), rgba(28,28,30,0.85));
      --faq-a-bg: linear-gradient(180deg, var(--surface), #3A3A3C);
      --footer-bg: rgba(28,28,30,0.72);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, -apple-system, BlinkMacMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition: background .3s, color .3s; /* Tăng tốc độ chuyển đổi */
      /* padding-top will be set by JS to avoid nav overlapping hero */
    }

    a{color:inherit}
    .container{max-width:var(--maxw);margin:0 auto;padding:0 20px}

    /* ===== NAVBAR (Apple-like premium) ===== */
    .topbar {
      position: fixed;
      top:12px;
      left:50%;
      transform:translateX(-50%);
      width: calc(100% - 32px);
      max-width:var(--maxw);
      z-index:1600;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:var(--nav-gap);
      padding:10px 18px;
      background:var(--topbar-bg);
      backdrop-filter: blur(12px) saturate(150%);
      border:1px solid var(--glass-border);
      border-radius:14px;
      box-shadow:0 8px 24px rgba(0,0,0,0.06);
      transition: all 280ms cubic-bezier(.2,.9,.2,1);
    }
    .topbar.scrolled{
      background:var(--topbar-scrolled-bg);
      box-shadow:0 10px 30px rgba(0,0,0,0.08);
      padding:8px 16px;
    }
    /* Dark mode shadow adjustment */
    body.dark .topbar.scrolled {
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
    body.dark .topbar {
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }


    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:40px;height:40px;border-radius:8px;object-fit:cover}
    .brand h3{margin:0;font-size:1.05rem;font-weight:700;color:var(--text)}

    .nav-links{display:flex;align-items:center;gap:8px}
    .nav-links a{
      color:var(--text);text-decoration:none;font-weight:600;padding:8px 12px;border-radius:10px;display:inline-flex;gap:8px;align-items:center;transition:all .16s;
    }
    .nav-links a i{width:18px;text-align:center}
    .nav-links a:hover{color:var(--accent);background:rgba(0,122,255,0.06)}
    /* Dark Mode hover */
    body.dark .nav-links a:hover{background:rgba(10,132,255,0.12);}


    .cta{background:var(--accent);color:#fff;padding:8px 16px;border-radius:999px;font-weight:700;box-shadow:0 8px 22px rgba(0,122,255,0.12)}
    .cta:hover{background:#0066e5}

    /* Dark Mode Toggle Button */
    .toggle-dark {
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 10px;
        background: rgba(0,0,0,0.04);
        transition: background 0.3s, transform 0.2s, color 0.3s;
        font-size: 1.1rem;
        display: inline-flex;
        align-items: center;
        margin-left: 8px; /* Tách khỏi CTA */
    }
    .toggle-dark:hover {
        background: rgba(0,0,0,0.1);
        transform: scale(1.05);
    }
    body.dark .toggle-dark {
        background: rgba(255,255,255,0.1);
        color: var(--text);
    }
    body.dark .toggle-dark:hover {
        background: rgba(255,255,255,0.2);
    }
    
    /* CẬP NHẬT: CSS cho Dark Mode Toggle */
    #toggle-dark-desktop { display:inline-flex; }
    #toggle-dark-mobile { display:none; }
    
    /* hamburger */
    .hamburger{display:none;background:none;border:0;cursor:pointer;padding:8px;border-radius:8px}
    .hamburger .bar{display:block;width:22px;height:2px;background:var(--text);margin:4px 0;border-radius:2px;transition:all .28s}
    .hamburger.active .bar:nth-child(1){transform:translateY(6px) rotate(45deg)}
    .hamburger.active .bar:nth-child(2){opacity:0}
    .hamburger.active .bar:nth-child(3){transform:translateY(-6px) rotate(-45deg)}

    /* drawer + overlay */
    .drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.28);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .28s;z-index:1500}
    .drawer-overlay.active{opacity:1;pointer-events:auto}
    .drawer{
      position:fixed;top:0;right:0;height:100vh;width:340px;max-width:90vw;
      background:var(--drawer-bg);
      backdrop-filter: blur(18px) saturate(150%);
      box-shadow:-18px 0 40px rgba(0,0,0,0.12);
      transform: translateX(110%);
      transition: transform .42s cubic-bezier(.2,.9,.2,1);
      z-index:1550;padding:84px 22px 22px;border-left:1px solid var(--glass-border)
    }
    .drawer.open{transform:translateX(0)}
    .drawer a{display:block;padding:12px 6px;color:var(--text);text-decoration:none;font-weight:700;border-radius:8px}
    .drawer a.icon{display:flex;gap:12px;align-items:center}
    .drawer a.cta{margin-top:18px;background:var(--accent);color:#fff;padding:12px;text-align:center;border-radius:999px}

    /* ===== HERO (Apple Vision Motion) ===== */
    .hero {
      position:relative;
      margin: 24px auto;
      max-width:var(--maxw);
      border-radius:18px;
      overflow:hidden;
      border:1px solid var(--glass-border);
      box-shadow:0 12px 36px rgba(12,18,24,0.06);
      background: var(--hero-bg);
      padding:48px 28px 36px;
    }
    body.dark .hero {
      box-shadow: 0 12px 36px rgba(0,0,0,0.4);
    }

    /* gradient moving layer under hero content */
    .hero .grad-layer{
      position:absolute; inset:-30% -40% auto -40%; height:260%; pointer-events:none; z-index:0;
      background:
        radial-gradient(700px 300px at 10% 30%, rgba(0,122,255,0.06), transparent 12%),
        radial-gradient(600px 260px at 80% 70%, rgba(43,199,127,0.045), transparent 12%);
      transform:translateZ(0);
      animation:gradMove 12s linear infinite;
      mix-blend-mode:screen;opacity:0.95;
    }
    /* Dark mode grad layer color adjust */
    body.dark .hero .grad-layer {
       background:
        radial-gradient(700px 300px at 10% 30%, rgba(10,132,255,0.1), transparent 12%),
        radial-gradient(600px 260px at 80% 70%, rgba(48,209,88,0.08), transparent 12%);
        mix-blend-mode: color-dodge;
    }

    .hero .content{position:relative;z-index:2;max-width:920px;margin:0 auto;text-align:center}
    .hero .kicker{display:inline-block;background:var(--accent);color:#fff;padding:6px 12px;border-radius:999px;font-weight:700;margin-bottom:12px}
    .hero h1{margin:10px 0 12px;font-size:clamp(30px,6.5vw,48px);line-height:1.02;font-weight:800;color:var(--text)}
    .hero p.lead{color:var(--muted);font-size:1.05rem;line-height:1.5;max-width:760px;margin:0 auto 18px}

    /* hero description ~350 chars block (kept concise) */
    .hero .desc {
      margin-top:12px;color:var(--muted);font-size:0.96rem;line-height:1.45;max-width:820px;margin-left:auto;margin-right:auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.0), rgba(255,255,255,0.0));
      padding:10px 14px;border-radius:10px;
    }

    .hero-actions{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-top:18px}
    .btn{display:inline-flex;gap:10px;align-items:center;padding:12px 20px;border-radius:999px;border:0;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;box-shadow:0 8px 26px rgba(0,122,255,0.14)}
    .btn.primary.alt{background:var(--accent-2);box-shadow:0 8px 26px rgba(43,199,127,0.12)}
    .btn.alt{background:transparent;border:1px solid rgba(0,0,0,0.06);color:var(--text)}
    /* Dark mode button adjustments */
    body.dark .btn.alt{
        border:1px solid rgba(255,255,255,0.12);
        color:var(--text);
    }
    body.dark .btn.alt:hover{
        background: rgba(255,255,255,0.08);
    }

    /* MỚI: CTA Scroll xuống */
    .btn-scroll-down{
      background:none; border:1px solid var(--accent); color:var(--accent);
      animation: floatScroll 1.5s infinite alternate; /* Hiệu ứng nhẹ */
    }
    @keyframes floatScroll {
      0% { transform: translateY(0); box-shadow: 0 4px 8px rgba(0,0,0,0.08); }
      100% { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.1); }
    }


    /* entrance */
    .hero h1,.hero p.lead,.hero .kicker,.hero .desc,.hero-actions{opacity:0;transform:translateY(18px);filter:blur(6px);animation:blurFade .9s ease forwards}
    .hero .kicker{animation-delay:.08s}
    .hero h1{animation-delay:.18s}
    .hero p.lead{animation-delay:.4s}
    .hero .desc{animation-delay:.6s}
    .hero-actions{animation-delay:.9s}
    @keyframes blurFade{
      0%{opacity:0;transform:translateY(18px);filter:blur(6px)}
      60%{opacity:1;filter:blur(2px)}
      100%{opacity:1;transform:none;filter:blur(0)}
    }

    /* ===== PRICE TABLE (glass) ===== */
    .price-section{margin-top:30px}
    .price-table-wrap {
      margin-top: 12px;
      overflow-x: auto;
      border-radius: 14px;
      background: var(--table-wrap-bg);
      backdrop-filter: blur(10px) saturate(150%);
      border: 1px solid var(--glass-border);
      box-shadow: 0 12px 36px rgba(0,0,0,0.04);
    }
    /* Dark mode price table */
    body.dark .price-table-wrap {
        box-shadow: 0 12px 36px rgba(0,0,0,0.4);
    }
    .price-table {
      width: 100%;
      border-collapse: collapse;
      text-align: center;
      font-size: 1rem;
      color: var(--text);
      min-width: 720px;
    }
    .price-table th, .price-table td {
      padding: 14px 16px;
      border-bottom: 1px solid var(--glass-border); /* Sử dụng glass-border */
    }
    .price-table th {
      background: var(--table-head-bg);
      font-weight: 700;
    }
    .price-table tr:hover td { background: rgba(0,122,255,0.03) }
    body.dark .price-table tr:hover td { background: rgba(10,132,255,0.08) }

    .price-table td:first-child { text-align:left;padding-left:20px;font-weight:600 }

    /* ===== IMAGE UNDER PRICE TABLE (with frame) ===== */
    .price-image-container {
      margin-top: 20px;
      max-width: 750px;
      margin-left: auto;
      margin-right: auto;
      padding: 16px;
      border-radius: 18px;
      background: var(--surface);
      box-shadow: 0 12px 36px rgba(12, 18, 24, 0.1);
      border: 1px solid var(--glass-border);
    }
    /* Dark mode image container */
    body.dark .price-image-container {
        box-shadow: 0 12px 36px rgba(0,0,0,0.4);
    }

    .price-image {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    /* Dark mode image shadow */
    body.dark .price-image {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }

    /* ===== REVIEWS (cards sliding from sides) with parallax background ===== */
    .reviews-section{position:relative;margin:40px auto;padding:48px 20px;border-radius:18px;overflow:hidden}
    .reviews-bg{
      position:absolute;inset:0;background-image:url('https://i.postimg.cc/PrKmHvJX/IMG-5272.jpg');background-size:cover;background-position:center;
      opacity:0.18;transform:translateY(0);will-change:transform;filter:grayscale(10%) brightness(1.05);
    }
    /* Dark mode reviews bg */
    body.dark .reviews-bg {
        filter: grayscale(80%) brightness(0.6);
        opacity: 0.25;
    }

    /* overlay for subtle gradient */
    .reviews-overlay{
      position:absolute;inset:0;background:var(--review-overlay-bg);pointer-events:none;
    }
    .reviews-wrap{position:relative;z-index:2;max-width:var(--maxw);margin:0 auto;padding:20px}
    .reviews-wrap h2{margin:0 0 10px;font-size:1.25rem}
    .review-cards{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:18px;
    }
    .review-card{
      background:var(--review-card-bg);
      border:1px solid var(--glass-border);
      padding:18px;border-radius:14px;box-shadow:0 12px 30px rgba(12,18,24,0.06);
      /* Initial state for animation */
      opacity:0; transform:translateX(0); filter:blur(6px);
      transition:opacity .72s ease, transform .72s cubic-bezier(.2,.9,.2,1), filter .36s;
    }
    /* Dark mode review card */
    body.dark .review-card {
        box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }

    /* State after being observed */
    .review-card.visible{opacity:1;transform:translateX(0);filter:blur(0)}

    /* ===== MOTION LUXE EDITION SCROLL EFFECTS ===== */
    .fade-up, .slide-left, .slide-right {
      opacity: 0;
      transition: all 0.8s cubic-bezier(.2,.9,.2,1);
    }
    .fade-up {transform: translateY(20px);}
    .slide-left {transform: translateX(-40px);}
    .slide-right {transform: translateX(40px);}

    .fade-up.visible, .slide-left.visible, .slide-right.visible {
      opacity: 1;
      transform: translate(0, 0);
    }
    /* Override for existing review cards */
    .review-card.slide-from-left { transform: translateX(-80px); }
    .review-card.slide-from-right { transform: translateX(80px); }
    .review-card.slide-from-left.visible, .review-card.slide-from-right.visible {
        opacity:1; transform:translateX(0); filter:blur(0);
    }

    /* ===== FAQ accordion ===== */
    .faq { margin-top:20px }
    .faq .q{
      background:var(--surface);padding:14px;border-radius:12px;border:1px solid var(--glass-border);display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;cursor:pointer;font-weight:700;
    }
    body.dark .faq .q{
        background: var(--surface);
    }
    .faq .q:focus{outline:3px solid rgba(0,122,255,0.12)}
    body.dark .faq .q:focus{outline:3px solid rgba(10,132,255,0.25)}

    .faq .a{display:none;padding:14px 16px;border-left:3px solid var(--accent);margin-bottom:12px;background:var(--faq-a-bg);border-radius:0 12px 12px 12px;color:var(--muted)}
    .faq .a.open{display:block}

    /* ===== FOOTER ===== */
    footer{padding:28px 12px;text-align:center;color:var(--muted);margin-top:20px}

    /* ** CSS Nâng Cấp: Footer Premium v5.2 Apple Glass + Quick Call + Back Top ** */
    
    /* Footer Apple Glass */
    footer.premium {
      background: var(--footer-bg);
      backdrop-filter: blur(14px) saturate(150%);
      border-top: 1px solid var(--glass-border);
      padding: 48px 20px 32px;
      /* Thay thế footer-container bằng grid trực tiếp */
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); 
      gap: 24px;
      font-family: Inter, sans-serif;
      color: var(--text);
      position: relative;
      overflow: hidden;
      box-shadow: 0 -8px 32px rgba(0,0,0,0.06);
      border-radius: 16px 16px 0 0;
      margin-top: 0; 
      padding-bottom: 50px; 
      text-align: left; /* Đặt lại mặc định là left */
    }
    body.dark footer.premium {
        box-shadow: 0 -8px 32px rgba(0,0,0,0.3);
    }

    footer.premium h4 {
      margin-bottom: 12px;
      font-weight: 700;
      font-size: 1.05rem;
      text-transform: uppercase;
      color: var(--accent); /* Đổi màu tiêu đề */
    }

    footer.premium a {
      display: block;
      margin: 6px 0;
      color: var(--text);
      text-decoration: none;
      transition: all 0.2s ease;
      text-align: left;
      position: relative;
    }

    /* Hiệu ứng gạch chân (tùy chọn) */
    footer.premium a::after {
      content:'';
      position:absolute;
      left:0; bottom:0;
      width:0; height:2px;
      background: linear-gradient(90deg,var(--accent),var(--quick-main-end));
      transition: width 0.3s ease;
      border-radius:1px;
    }

    footer.premium a:hover::after { width:100%; }
    footer.premium a:hover {
      color: var(--accent);
      transform: translateX(4px);
    }
    
    /* Icon style */
    footer.premium a i {
        margin-right: 6px;
        width: 18px;
        text-align: center;
    }


    footer .author, footer.premium p {
      margin-top: 6px;
      font-size: 0.85rem;
      color: var(--muted);
      display: flex; 
      align-items: center; 
      gap: 6px;
    }

    /* Style cho social icons */
    .footer-social {
        display: flex;
        gap: 12px;
        margin-top: 10px;
    }
    .footer-social a {
        display: inline-flex;
        width: 32px;
        height: 32px;
        background: var(--accent);
        color: #fff;
        border-radius: 50%;
        justify-content: center;
        align-items: center;
        font-size: 1rem;
        transition: transform 0.2s, background 0.2s;
    }
    .footer-social a:hover {
        transform: scale(1.1);
        background: var(--quick-main-end);
    }


    /* Xóa style cũ của .quick-call đơn giản (góc trái) */
    .quick-call { display: none !important; }

    /* Quick Call Neon Glow (Góc phải) - TỐI ƯU HÓA */
    .quick-call-game {
      position: fixed;
      bottom: 16px;
      right: 16px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      z-index: 1600;
    }

    .quick-main {
      background: linear-gradient(135deg,var(--quick-main-start),var(--quick-main-end));
      color: #fff;
      border: none;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      box-shadow: 0 0 15px var(--quick-main-start), 0 0 30px var(--quick-main-end), 0 0 50px var(--quick-main-start);
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      transition: all 0.2s ease;
      animation: float 2s infinite alternate, neonGlow 1.8s infinite alternate;
    }
    .quick-main:hover {
      transform: scale(1.15) rotate(-12deg);
      box-shadow: 0 0 25px var(--quick-main-start), 0 0 50px var(--quick-main-end), 0 0 70px var(--quick-main-start);
    }
    @keyframes float {
      0% { transform: translateY(0); }
      100% { transform: translateY(-10px); }
    }
    @keyframes neonGlow {
      0%, 100% { box-shadow: 0 0 15px var(--quick-main-start), 0 0 30px var(--quick-main-end), 0 0 50px var(--quick-main-start); }
      50% { box-shadow: 0 0 25px var(--quick-main-start), 0 0 45px var(--quick-main-end), 0 0 70px var(--quick-main-start); }
    }

    .quick-sub {
      display: none;
      flex-direction: column;
      margin-bottom: 12px; 
      gap: 12px;
    }
    .quick-sub a {
      width: 50px; height: 50px;
      border-radius: 50%;
      display: flex; justify-content: center; align-items: center;
      background: linear-gradient(135deg,var(--quick-sub-start),var(--quick-sub-end));
      color: #fff;
      font-size: 1.2rem;
      box-shadow: 0 0 12px var(--quick-sub-start), 0 0 25px var(--quick-sub-end);
      transition: all 0.2s ease;
      text-decoration: none;
    }
    .quick-sub a:hover {
      transform: scale(1.15) rotate(-10deg);
      box-shadow: 0 0 20px var(--quick-sub-start), 0 0 35px var(--quick-sub-end);
    }

    .quick-call-game.open .quick-sub {
      display: flex;
      animation: subAppear 0.3s ease forwards;
    }
    @keyframes subAppear {
      0% { opacity:0; transform: translateY(12px); }
      100% { opacity:1; transform: translateY(0); }
    }

    /* Back to top (Điều chỉnh vị trí) */
    .back-top {
      position: fixed;
      right: 16px;
      bottom: 90px; /* Mặc định */
      background: #2bc76f;
      color: #fff;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: none; /* Mặc định ẩn, JS sẽ bật */
      justify-content: center;
      align-items: center;
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: 0 8px 18px rgba(43,199,111,0.3);
      transition: all 0.2s ease;
      z-index: 1600;
      text-align: center;
    }
    /* JS sẽ điều chỉnh: quick-call-game.open ~ .back-top */

    @media (max-width: 520px) {
        .back-top { bottom: 80px; }
        /* JS sẽ điều chỉnh: quick-call-game.open ~ .back-top */
    }
    .back-top:hover { transform: scale(1.1); }

    /* Tagline xe máy loop 2 chiều */
    .footer-tagline {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 36px;
      overflow: hidden;
      display: flex;
      align-items: center;
      font-weight: 700;
      font-size: 1rem;
      color: var(--accent);
      background: var(--footer-bg); 
      padding: 0 0 0 20px;
      border-top: 1px solid var(--glass-border);
    }
    .footer-tagline .inner {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      animation: marquee 15s linear infinite alternate;
      padding-right: 40px; 
      text-shadow: 0 0 4px #00d4ff, 0 0 10px #00d4ff; /* Thêm hiệu ứng glow nhẹ */
    }
    .footer-tagline img {
      width: 28px;
      height: 28px;
      border-radius: 4px;
    }
    .footer-tagline:hover .inner { animation-play-state: paused; }

    /* Đổi animation để vòng lặp 2 chiều, mượt hơn */
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    /* responsive */
    @media (max-width:900px){
      /* CẬP NHẬT: CSS CHO DARK MODE TOGGLE */
      #toggle-dark-desktop { display:none; }
      #toggle-dark-mobile { 
        display:inline-flex;
        order: 2; 
        margin: 0 10px 0 auto;
      }

      .nav-links{display:none}
      .hamburger{display:block}
      .topbar{
        left:0;
        transform:none;
        width:100%;
        border-radius:0;
        max-width:none;
        justify-content:space-between;
        padding:8px 14px
      }
      .topbar .brand { order: 1; }
      .topbar .hamburger { order: 3; }

      .hero{margin-top:20px;padding:36px 16px}
      .reviews-section{padding:28px 12px}
      .price-table{min-width:600px}
    }
    @media (max-width:520px){
      .price-table{min-width:480px}
      .brand h3{font-size:0.98rem}
      .price-image-container { padding: 10px; }
      footer.premium { 
        grid-template-columns: 1fr; 
        text-align: center; 
        padding-left: 10px;
        padding-right: 10px;
      }
      /* Căn giữa cho mobile */
      footer.premium a, footer .author, footer.premium p {
        text-align: center; 
        justify-content: center;
      }
      .footer-social {
        justify-content: center;
      }
      .footer-tagline { 
        font-size: 0.9rem; 
        padding-left: 10px;
      }
    }

    /* CSS FIX LỖI CHO SLOT GAME (ĐÃ DI CHUYỂN VÀO HEAD) */
    #slot-section {
      font-family:sans-serif;
      padding:20px;
      background:var(--bg);
      color:var(--text);
      text-align:center;
      border-radius:15px;
      max-width:500px;
      margin:20px auto;
      position:relative;
      overflow:hidden;
      transition: background 0.3s, color 0.3s;
    }
    #slot-section h2 { color: var(--accent); margin-bottom:10px; font-weight:600; }
    #slot-section h3 { font-size:1rem; margin-bottom:20px; color:var(--muted); }
    #slot-section .reel {
      width:80px; height:80px; margin:5px; border-radius:15px;
      background: linear-gradient(45deg,#E3E3E3,#BDBDBD);
      display:flex; align-items:center; justify-content:center;
      font-size:2rem; color:#000; box-shadow:0 0 15px rgba(0,0,0,0.2);
    }
    /* Thêm CSS cho dark mode của reel */
    body.dark #slot-section .reel {
      background: linear-gradient(45deg, #444, #111);
      color: #fff;
    }

    #slot { display:flex; justify-content:center; gap:10px; margin-bottom:20px; }
    #spinBtn {
      padding:10px 20px; font-size:1.1rem; cursor:pointer;
      background: var(--accent); border:none; border-radius:10px;
      color:#fff; font-weight:bold;
    }
    #result { margin-top:20px; font-size:1.2rem; font-weight:bold; }
    #reward { margin-top:10px; font-size:1rem; font-weight:bold; display:none; }
    
    /* CSS gốc của slot game (đã bị xóa khỏi inline) */
    /* Điều chỉnh lại cho phù hợp với var() */
    body.dark #slot-section h2 {
      color: var(--text); /* highlight */
    }
    body.dark #slot-section h3 {
      color: var(--text);
    }
    body.dark #slot-section .reel {
      color: var(--text); /* highlight */
    }
    #spinBtn {
      background: var(--accent); /* highlight */
      color: #fff; /* bg */
    }
    body.dark #spinBtn {
      background: var(--accent); /* highlight */
      color: var(--bg);
    }
    #result {
      color: var(--text); /* highlight */
    }
    #reward {
      color: var(--text); /* highlight */
    }
    @media(max-width:600px){
      #slot-section {padding:15px;}
      .reel {width:70px;height:70px;font-size:1.8rem;}
      #slot {gap:5px;}
    }
  </style>
  
  <style>
      /* Nút accordion (giả lập style của .drawer a và .drawer a.icon) */
      .drawer .drawer-accordion-toggle {
        /* Reset button styles */
        background: none;
        border: none;
        text-align: left;
        cursor: pointer;
        
        /* .drawer a styles */
        display: block;
        padding: 12px 6px;
        color: var(--text);
        text-decoration: none;
        font-weight: 700;
        border-radius: 8px;
        
        /* .drawer a.icon styles */
        display: flex;
        gap: 12px;
        align-items: center;
        
        /* Thêm style flex cho toggle */
        justify-content: space-between;
        width: 100%;
        font-family: inherit; /* Đảm bảo font giống */
        font-size: 1rem; /* Đảm bảo font-size giống */
        line-height: 1.5; /* Đảm bảo line-height giống */
      }
      .drawer .drawer-accordion-toggle:hover {
         background: rgba(0,0,0,0.04); /* Thêm hover giống link */
      }
      body.dark .drawer .drawer-accordion-toggle:hover {
         background: rgba(255,255,255,0.08);
      }
      
      /* Icon caret */
      .drawer .drawer-accordion-toggle .caret-icon {
        transition: transform 0.3s cubic-bezier(.2,.9,.2,1);
        font-size: 0.9rem;
        color: var(--muted);
        padding: 0 8px; /* Thêm vùng đệm để dễ bấm */
      }
      
      /* Khi mở accordion */
      .drawer .drawer-accordion-toggle.open .caret-icon {
        transform: rotate(180deg);
        color: var(--accent);
      }
      .drawer .drawer-accordion-toggle.open {
        color: var(--accent);
        background: rgba(0,122,255,0.05);
      }
      body.dark .drawer .drawer-accordion-toggle.open {
        background: rgba(10,132,255,0.1);
      }
      
      /* Container cho submenu */
      .drawer .drawer-submenu {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.4s ease-out;
        
        /* Thụt lề và border */
        margin-left: 20px; /* Thụt vào so với icon DỊCH VỤ */
        padding-left: 14px; /* Padding bên trong border */
        border-left: 2px solid var(--glass-border);
        margin-top: -5px; /* Giảm khoảng cách */
        margin-bottom: 5px;
      }
      
      /* Khi submenu mở */
      .drawer .drawer-submenu.open {
        max-height: 400px; /* Đủ lớn để chứa 5 items */
        border-left: 2px solid var(--accent);
      }
      
      /* Style cho các link submenu */
      .drawer .drawer-submenu a.icon {
        padding-top: 10px;
        padding-bottom: 10px;
        padding-left: 0; /* Đã có padding ở container */
        font-size: 0.95rem;
        font-weight: 600;
        color: var(--muted);
      }
      .drawer .drawer-submenu a.icon:hover {
        color: var(--text);
        background: none;
      }
      .drawer .drawer-submenu a.icon i {
        width: 22px; /* Đảm bảo icon thẳng hàng */
        text-align: center;
      }
    </style>
  <!-- MotoTOC PRO v5.5 — full bundle (paste BEFORE </body>) -->
<script type="module">
/**
 * MotoTOC PRO v5.5
 * - Web Component <moto-toc> (open shadow)
 * - Features: auto H2/H3, MutationObserver, IntersectionObserver, global progress bar,
 *   command palette (Ctrl+K, /), keyboard (M / ArrowUp/Down / Esc), FAB + Drawer,
 *   full-text search with highlight, voice commands (SpeechRecognition), config panel (Alt+M),
 *   localStorage persistence, lazy init option (data-lazy / data-lazy-threshold)
 *
 * Usage:
 *  - Paste this <script type="module"> before </body>
 *  - It auto-inserts <moto-toc> if not present
 *  - Public API: document.querySelector('moto-toc').open(), .close(), .refresh()
 */

class MotoToc extends HTMLElement {
  constructor(){
    super();
    this._shadow = this.attachShadow({ mode: 'open' }); // open to allow debugging
    this._id = 'moto-toc-v5-5';
    this._headings = [];
    this._observer = null;
    this._mutObs = null;
    this._currentIndex = 0;
    this._openKey = this._id + '_open';
    this._lastSeenKey = this._id + '_last';
    this._usedKey = this._id + '_used';
    this._lazyThreshold = parseInt(this.getAttribute('data-lazy-threshold')) || 150;
    this._lazy = this.hasAttribute('data-lazy');
    this._inited = false;
    this._speech = null;
    this._highlightEls = [];
    this._config = {
      motion: true,
      remember: true,
      fullTextSearch: true,
      voice: false,
      commandPalette: true
    };
    this._render();
  }

  connectedCallback(){
    if(this._lazy){
      this._onScrollLazy = () => {
        if(window.scrollY > this._lazyThreshold){
          window.removeEventListener('scroll', this._onScrollLazy);
          this.init();
        }
      };
      window.addEventListener('scroll', this._onScrollLazy, { passive: true });
    } else this.init();
  }

  disconnectedCallback(){
    this._destroy();
  }

  // public API
  open(){ this._setDrawer(true); }
  close(){ this._setDrawer(false); }
  refresh(){ this._buildTOC(true); this._indexFullText(); }

  // internal render
  _render(){
    const style = document.createElement('style');
    style.textContent = `
      :host { all: initial; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
      .fab {
        position: fixed; left: 16px; bottom: 90px; width:56px; height:56px; border-radius:50%;
        display:flex;align-items:center;justify-content:center;
        background: var(--surface, #fff); color: var(--accent, #007aff);
        border:1px solid var(--glass-border, rgba(220,220,215,0.6));
        box-shadow:0 10px 30px rgba(0,0,0,0.12); backdrop-filter: blur(12px);
        z-index:18005; cursor:pointer; transition: transform .18s ease, background .18s;
      }
      .fab:hover{ transform: scale(1.07); background: var(--accent,#007aff); color:#fff; }
      .drawer {
        position: fixed; top:0; left:0; width:320px; max-width:85vw; height:100vh;
        background: var(--drawer-bg, linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,245,247,0.98)));
        border-right:1px solid var(--glass-border, rgba(220,220,215,0.6));
        box-shadow:12px 0 36px rgba(0,0,0,0.12);
        transform: translateX(-110%); transition: transform .36s cubic-bezier(.2,.9,.2,1);
        z-index:18004; display:flex; flex-direction:column; padding:80px 18px 20px; -webkit-overflow-scrolling:touch;
      }
      .drawer.open{ transform: translateX(0); }
      header { display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
      header h3 { margin:0; font-size:1.05rem; color:var(--accent,#007aff); font-weight:700; display:flex; gap:8px; align-items:center; }
      header button { background:none; border:none; color:var(--muted,#6e6e73); font-size:1.15rem; cursor:pointer; }
      .search { position:relative; margin-bottom:12px; }
      .search input { width:100%; padding:10px 36px 10px 12px; border-radius:10px; border:1px solid var(--glass-border, rgba(220,220,215,0.6)); background:var(--surface,#fff); color:var(--text,#1d1d1f); }
      .search i { position:absolute; right:12px; top:50%; transform: translateY(-50%); color:var(--muted,#6e6e73); pointer-events:none; }
      ul.toc { list-style:none; padding:0; margin:0; overflow-y:auto; flex-grow:1; }
      ul.toc li { margin:6px 0; }
      ul.toc li a { display:block; padding:6px 8px; border-radius:8px; color:var(--text,#1d1d1f); text-decoration:none; font-weight:500; transition:all .14s; }
      ul.toc li.h3 a { padding-left:18px; font-size:.95rem; color:var(--muted,#6e6e73); font-weight:600; }
      ul.toc a:hover{ color:var(--accent,#007aff); background: rgba(0,122,255,0.06); transform: translateX(3px); }
      ul.toc a.active{ color:var(--accent,#007aff); background: rgba(0,122,255,0.08); font-weight:700; }
      .nav-buttons { display:flex; gap:8px; margin-top:12px; justify-content:center; }
      .nav-buttons button { flex:1; padding:8px; border-radius:8px; border:1px solid var(--glass-border, rgba(220,220,215,0.6)); background:var(--surface,#fff); cursor:pointer; }
      .nav-buttons button:hover{ background:var(--accent,#007aff); color:#fff; transform: translateY(-2px); }
      .mini-bar { position: fixed; left: 50%; transform: translateX(-50%); bottom: 16px; padding:8px 14px; border-radius:20px; background: rgba(255,255,255,0.9); color:#111; box-shadow:0 4px 16px rgba(0,0,0,0.1); backdrop-filter: blur(8px); z-index:5000; opacity:0; pointer-events:none; transition: opacity .3s; }
      .cmd { position: fixed; top:0; left:0; width:100%; height:100%; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.45); z-index: 99999; }
      .cmd.active{ display:flex; }
      .cmd-inner { width:90%; max-width:640px; background:var(--surface,#fff); border-radius:12px; padding:12px; box-shadow:0 10px 40px rgba(0,0,0,0.25); backdrop-filter: blur(14px); }
      .cmd-inner input { width:100%; padding:10px; border-radius:8px; border:1px solid var(--glass-border, rgba(220,220,215,0.6)); outline:none; }
      .cmd-inner ul{ list-style:none; padding:0; margin:8px 0 0 0; max-height:260px; overflow:auto; }
      .cmd-inner li{ padding:8px; border-radius:8px; cursor:pointer; }
      .cmd-inner li:hover{ background: rgba(0,122,255,0.06); }
      .config-panel { position: fixed; right: 16px; bottom: 90px; width:320px; max-width: 88vw; border-radius:12px; padding:12px; background:var(--surface,#fff); box-shadow:0 10px 30px rgba(0,0,0,0.12); z-index:18006; display:none; }
      .config-panel.open { display:block; }
      .config-panel h4 { margin:0 0 8px 0; font-size:1rem; color:var(--accent,#007aff); }
      .highlight { background: rgba(255,235,59,0.45); padding:0; border-radius:2px; }
      @media (max-width:520px){ .fab{ left:10px; bottom:80px; width:48px; height:48px; } .drawer{ width:260px; padding:70px 14px; } .config-panel{ width: 240px; right:8px; } }
    `;
    this._shadow.appendChild(style);

    const container = document.createElement('div');
    container.innerHTML = `
      <button class="fab" part="fab" aria-label="Mục lục (M)" title="Mục lục">≡</button>
      <nav class="drawer" part="drawer" aria-label="Mục lục" aria-hidden="true">
        <header><h3>📚 Mục lục</h3><button class="close" aria-label="Đóng">✕</button></header>
        <div class="search"><input type="search" placeholder="Tìm nội dung..." aria-label="Tìm trong mục lục"><i>🔎</i></div>
        <ul class="toc" role="list"></ul>
        <div class="nav-buttons" role="group"><button class="prev" title="Lên (↑)">↑</button><button class="next" title="Xuống (↓)">↓</button></div>
      </nav>
      <div class="mini-bar" part="mini"> </div>
      <div class="cmd" part="cmd"><div class="cmd-inner"><input type="text" placeholder="Tìm hoặc nhảy đến mục..."><ul></ul></div></div>
      <div class="config-panel" part="config"><h4>TOC Settings</h4>
        <label><input type="checkbox" data-key="motion" checked> Motion animations</label><br>
        <label><input type="checkbox" data-key="remember" checked> Remember last section</label><br>
        <label><input type="checkbox" data-key="fullTextSearch" checked> Full-text search (highlight)</label><br>
        <label><input type="checkbox" data-key="voice"> Voice commands</label><br>
        <small>Shortcuts: <strong>M</strong> open, <strong>Ctrl/⌘+K</strong> palette, <strong>Alt+M</strong> settings</small>
      </div>
    `;
    this._shadow.appendChild(container);

    // global progress bar
    if(!document.getElementById(this._id + '-progress')){
      const p = document.createElement('div');
      p.id = this._id + '-progress';
      p.setAttribute('aria-hidden','true');
      Object.assign(p.style, { position:'fixed', top:'0', left:'0', height:'4px', background: getComputedStyle(document.documentElement).getPropertyValue('--accent') || '#007aff', width:'0%', zIndex:'99999', transition:'width .12s linear' });
      document.body.appendChild(p);
      this._progressEl = p;
    } else this._progressEl = document.getElementById(this._id + '-progress');

    // refs
    this._els = {
      fab: this._shadow.querySelector('.fab'),
      drawer: this._shadow.querySelector('.drawer'),
      close: this._shadow.querySelector('.close'),
      searchInput: this._shadow.querySelector('.search input'),
      tocList: this._shadow.querySelector('ul.toc'),
      prev: this._shadow.querySelector('.prev'),
      next: this._shadow.querySelector('.next'),
      miniBar: this._shadow.querySelector('.mini-bar'),
      cmd: this._shadow.querySelector('.cmd'),
      cmdInput: this._shadow.querySelector('.cmd-inner input'),
      cmdList: this._shadow.querySelector('.cmd-inner ul'),
      config: this._shadow.querySelector('.config-panel')
    };
  }

  // init once
  init(){
    if(this._inited) return;
    this._inited = true;
    // load config from storage
    this._loadConfig();
    this._buildTOC();
    this._bindUI();
    this._observeMutations();
    this._attachIntersectionObserver();
    this._indexFullText();
    this._updateFromStorage();
    this._updateProgress();
    // small hint
    setTimeout(()=> { if(!localStorage.getItem(this._usedKey)) this._pulseFab(); }, 1400);
  }

  // pulse fab
  _pulseFab(){
    try{
      this._els.fab.animate([{ transform:'scale(1)' }, { transform:'scale(1.08)' }, { transform:'scale(1)' }], { duration:1100, iterations:1 });
    }catch(e){}
  }

  // build toc from main h2/h3
  _buildTOC(force=false){
    const main = document.querySelector('main') || document.body;
    const nodes = Array.from(main.querySelectorAll('h2, h3'));
    this._headings = nodes;
    this._els.tocList.innerHTML = '';
    nodes.forEach((el, idx)=>{
      if(!el.id){
        const base = (el.textContent || 'section-' + idx).trim().toLowerCase().replace(/\s+/g,'-').replace(/[^a-z0-9\-]/g,'');
        let id = base || ('section-' + idx);
        let i=1; while(document.getElementById(id)) id = base + '-' + (i++);
        el.id = id;
      }
      const li = document.createElement('li');
      li.className = el.tagName.toLowerCase();
      const a = document.createElement('a');
      a.href = '#' + el.id;
      a.textContent = el.textContent.trim();
      a.setAttribute('data-id', el.id);
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        this._setDrawer(false);
        this._scrollToElement(el);
      });
      li.appendChild(a);
      this._els.tocList.appendChild(li);
    });
    // reattach observer
    this._attachIntersectionObserver();
  }

  // intersection observer
  _attachIntersectionObserver(){
    if(this._observer) { try{ this._observer.disconnect(); }catch(e){} this._observer = null; }
    const opts = { root:null, rootMargin:'-60% 0px -30% 0px', threshold: 0.01 };
    this._observer = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        const id = entry.target.id;
        const link = this._els.tocList.querySelector(`a[data-id="${id}"]`);
        if(!link) return;
        if(entry.isIntersecting){
          this._els.tocList.querySelectorAll('a').forEach(a=>a.classList.remove('active'));
          link.classList.add('active');
          this._currentIndex = this._headings.findIndex(h=>h.id===id);
          if(this._config.remember) localStorage.setItem(this._lastSeenKey, id);
          // announce
          this._els.miniBarText = entry.target.textContent || id;
          this._showMiniBar(this._els.miniBarText);
          // ensure visible in drawer
          if(this._els.drawer.classList.contains('open')){
            const parent = link.parentElement, st = this._els.tocList.scrollTop, top = parent.offsetTop, bottom = top + parent.offsetHeight;
            if(top < st || bottom > (st + this._els.tocList.clientHeight)) this._els.tocList.scrollTo({ top: Math.max(0, top - 80), behavior: 'smooth' });
          }
        }
      });
    }, opts);
    this._headings.forEach(h => this._observer.observe(h));
  }

  // bind UI
  _bindUI(){
    // fab
    this._els.fab.addEventListener('click', (e)=>{ e.stopPropagation(); localStorage.setItem(this._usedKey,'1'); this._setDrawer(!this._els.drawer.classList.contains('open')); });
    this._els.close.addEventListener('click', ()=> this._setDrawer(false));
    document.addEventListener('click', (e)=> { if(this._els.drawer.classList.contains('open') && !this.contains(e.target) && !this._shadowContains(e)) this._setDrawer(false); });

    // search input (filter)
    this._els.searchInput.addEventListener('input', (e)=> {
      const q = e.target.value.trim().toLowerCase();
      this._els.tocList.querySelectorAll('li').forEach(li => {
        li.style.display = (li.textContent || '').toLowerCase().includes(q) ? '' : 'none';
      });
      if(this._config.fullTextSearch) this._fullTextSearch(q);
    });

    // nav buttons
    this._els.prev.addEventListener('click', ()=> this._navRelative(-1));
    this._els.next.addEventListener('click', ()=> this._navRelative(1));

    // command palette
    this._els.cmdInput.addEventListener('input', ()=> this._buildCmdList(this._els.cmdInput.value));
    this._els.cmd.addEventListener('click', (e)=> { if(e.target === this._els.cmd) this._closeCmd(); });
    this._els.cmdList.addEventListener('click', (e)=> {
      const li = e.target.closest('li'); if(!li) return;
      const id = li.dataset.id; const el = document.getElementById(id);
      if(el){ this._scrollToElement(el); this._closeCmd(); }
    });

    // config panel toggles
    this._shadow.querySelectorAll('.config-panel [data-key]').forEach(ch=>{
      const key = ch.getAttribute('data-key');
      ch.checked = !!this._config[key];
      ch.addEventListener('change', (e)=> { this._config[key] = e.target.checked; this._storeConfig(); if(key==='voice') this._initVoiceIfNeeded(); });
    });

    // keyboard shortcuts
    this._onKeydown = (e) => {
      const tag = document.activeElement && document.activeElement.tagName && document.activeElement.tagName.toLowerCase();
      if(tag === 'input' || tag === 'textarea') {
        // allow ctrl/meta+k to work when typing (we'll override only when not input)
      }
      if(e.key && e.key.toLowerCase() === 'm' && !e.altKey) { e.preventDefault(); this._setDrawer(!this._els.drawer.classList.contains('open')); }
      if((e.ctrlKey || e.metaKey) && e.key && e.key.toLowerCase() === 'k'){ e.preventDefault(); if(this._config.commandPalette) this._openCmd(); }
      if(e.key === '/' && !this._isTyping()) { e.preventDefault(); if(this._config.commandPalette) this._openCmd(); }
      if(e.key === 'ArrowUp') { e.preventDefault(); this._navRelative(-1); }
      if(e.key === 'ArrowDown') { e.preventDefault(); this._navRelative(1); }
      if(e.key === 'Escape') { this._setDrawer(false); this._closeCmd(); this._closeConfig(); }
      if(e.altKey && e.key && e.key.toLowerCase() === 'm'){ e.preventDefault(); this._toggleConfig(); }
    };
    window.addEventListener('keydown', this._onKeydown, { passive: false });

    // window scroll -> progress
    this._onScroll = ()=> this._updateProgress();
    window.addEventListener('scroll', this._onScroll, { passive: true });
    window.addEventListener('resize', ()=> this._updateProgress(), { passive: true });

    // init voice if enabled
    if(this._config.voice) this._initVoiceIfNeeded();
  }

  // small helper to check if focused on typing
  _isTyping(){ const tag = document.activeElement && document.activeElement.tagName && document.activeElement.tagName.toLowerCase(); return tag === 'input' || tag === 'textarea' || document.activeElement.isContentEditable; }

  // open/close drawer
  _setDrawer(open){
    if(open){
      this._els.drawer.classList.add('open');
      this._els.drawer.setAttribute('aria-hidden','false');
      localStorage.setItem(this._openKey,'true');
      // motion hint
      if(this._config.motion) try{ this._els.drawer.animate([{ transform:'translateX(-110%) scale(.98)', opacity:0 }, { transform:'translateX(0) scale(1)', opacity:1 }], { duration: 380, easing: 'cubic-bezier(.2,.9,.3,1)' }); } catch(e) {}
    } else {
      if(this._config.motion) try{ this._els.drawer.animate([{ transform:'translateX(0)', opacity:1 }, { transform:'translateX(-110%)', opacity:0 }], { duration: 260, easing: 'ease-in-out' }); } catch(e){}
      this._els.drawer.classList.remove('open');
      this._els.drawer.setAttribute('aria-hidden','true');
      localStorage.setItem(this._openKey,'false');
    }
  }

  // scroll to element with offset of topbar
  _scrollToElement(el){
    if(!el) return;
    const nav = document.getElementById('topbar');
    const offset = nav ? nav.getBoundingClientRect().height + 8 : 88;
    const top = el.getBoundingClientRect().top + window.scrollY - offset;
    window.scrollTo({ top, behavior: 'smooth' });
  }

  // nav relative
  _navRelative(delta){
    let idx = this._currentIndex + delta;
    if(idx < 0) idx = 0;
    if(idx >= this._headings.length) idx = this._headings.length - 1;
    const el = this._headings[idx];
    if(el) this._scrollToElement(el);
  }

  // update progress bar
  _updateProgress(){
    if(!this._progressEl) return;
    const st = window.scrollY || window.pageYOffset;
    const docH = document.body.scrollHeight - window.innerHeight;
    const pct = Math.min(100, Math.max(0, (st / (docH || 1)) * 100));
    this._progressEl.style.width = pct + '%';
  }

  // observe DOM mutations in main
  _observeMutations(){
    const main = document.querySelector('main') || document.body;
    if(this._mutObs) this._mutObs.disconnect();
    this._mutObs = new MutationObserver(() => {
      if(this._mutTimeout) clearTimeout(this._mutTimeout);
      this._mutTimeout = setTimeout(()=> { this._buildTOC(true); this._indexFullText(); }, 220);
    });
    this._mutObs.observe(main, { childList:true, subtree:true, characterData:true });
  }

  // index full text for search
  _indexFullText(){
    if(!this._config.fullTextSearch) return;
    try{
      // collect plain text nodes under main, map to heading anchors
      const main = document.querySelector('main') || document.body;
      const blocks = Array.from(main.querySelectorAll('p, li, h2, h3, h4, .lead, .desc, .price-image-container'));
      // store mapping element -> text
      this._fullIndex = blocks.map(b => ({ el: b, text: (b.textContent || '').trim() }));
    }catch(e){ this._fullIndex = []; }
  }

  // full text search with highlight
  _fullTextSearch(q){
    // clear previous highlights
    this._clearHighlights();
    if(!q) return;
    const main = document.querySelector('main') || document.body;
    const textNodes = [];
    function walk(node){
      node.childNodes.forEach(n=>{
        if(n.nodeType === 3 && n.nodeValue.trim()){
          textNodes.push(n);
        } else if(n.nodeType === 1 && !['SCRIPT','STYLE','NOSCRIPT'].includes(n.tagName)){
          walk(n);
        }
      });
    }
    walk(main);
    const qLower = q.toLowerCase();
    const matches = [];
    // naive highlight: wrap matched words in <mark class="moto-highlight">
    textNodes.forEach(t=>{
      const parent = t.parentElement;
      const txt = t.nodeValue;
      const idx = txt.toLowerCase().indexOf(qLower);
      if(idx !== -1){
        matches.push({node: t, idx});
        // create highlighted fragment
        const span = document.createElement('span');
        const before = document.createTextNode(txt.slice(0, idx));
        const matchText = document.createElement('mark');
        matchText.className = 'moto-highlight';
        matchText.textContent = txt.slice(idx, idx + q.length);
        const after = document.createTextNode(txt.slice(idx + q.length));
        span.appendChild(before); span.appendChild(matchText); span.appendChild(after);
        parent.replaceChild(span, t);
        this._highlightEls.push(matchText);
      }
    });
    // remove highlights after 8s
    setTimeout(()=> this._clearHighlights(), 8000);
  }

  _clearHighlights(){
    this._highlightEls.forEach(h=>{
      const parent = h.parentElement;
      if(!parent) return;
      const text = h.textContent;
      const before = parent.childNodes[0] && parent.childNodes[0].nodeType === 3 ? parent.childNodes[0].nodeValue : '';
      const after = parent.childNodes[parent.childNodes.length -1] && parent.childNodes[parent.childNodes.length -1].nodeType === 3 ? parent.childNodes[parent.childNodes.length -1].nodeValue : '';
      // reconstruct
      const whole = (before || '') + (text || '') + (after || '');
      parent.replaceWith(document.createTextNode(whole));
    });
    this._highlightEls = [];
  }

  // command palette
  _openCmd(){
    this._els.cmd.classList.add('active');
    this._els.cmdInput.focus();
    this._buildCmdList('');
  }
  _closeCmd(){ this._els.cmd.classList.remove('active'); this._els.cmdInput.value = ''; this._els.cmdList.innerHTML = ''; }

  _buildCmdList(q=''){
    const items = this._headings.filter(h => h.textContent.toLowerCase().includes((q||'').toLowerCase()));
    this._els.cmdList.innerHTML = items.map(h => `<li data-id="${h.id}">${h.textContent}</li>`).join('');
  }

  // voice commands (simple)
  _initVoiceIfNeeded(){
    if(!this._config.voice) return this._stopVoice();
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if(!SpeechRecognition) return console.warn('SpeechRecognition not supported.');
    if(this._speech) return; // already
    this._speech = new SpeechRecognition();
    this._speech.lang = 'vi-VN';
    this._speech.continuous = false;
    this._speech.interimResults = false;
    this._speech.onresult = (e) => {
      const txt = (e.results && e.results[0] && e.results[0][0] && e.results[0][0].transcript) ? e.results[0][0].transcript.trim() : '';
      if(txt){
        // attempt to match heading by words
        const matched = this._headings.find(h => (h.textContent || '').toLowerCase().includes(txt.toLowerCase()));
        if(matched) this._scrollToElement(matched);
      }
    };
    this._speech.onerror = (e)=> console.warn('Speech error', e);
    // start on demand via toggling voice in config panel
    // create voice control inside config
    if(!this._voiceToggle) {
      const vBtn = document.createElement('button');
      vBtn.textContent = '🎤 Start Voice';
      vBtn.style.marginTop = '8px';
      vBtn.addEventListener('click', ()=> {
        if(this._listening){ this._stopVoice(); vBtn.textContent = '🎤 Start Voice'; }
        else { this._startVoice(); vBtn.textContent = '⏹️ Stop Voice'; }
      });
      this._shadow.querySelector('.config-panel').appendChild(vBtn);
      this._voiceToggle = vBtn;
    }
  }

  _startVoice(){
    if(!this._speech) return;
    try{ this._speech.start(); this._listening = true; } catch(e){ console.warn(e); }
  }
  _stopVoice(){
    if(!this._speech) return;
    try{ this._speech.stop(); this._listening = false; } catch(e){}
  }

  // storage for settings
  _storeConfig(){ localStorage.setItem(this._id + '_cfg', JSON.stringify(this._config)); }
  _loadConfig(){ const raw = localStorage.getItem(this._id + '_cfg'); if(raw) try{ this._config = Object.assign(this._config, JSON.parse(raw)); } catch(e){} }

  // update from storage
  _updateFromStorage(){
    const wasOpen = localStorage.getItem(this._openKey);
    if(wasOpen === 'true') this._setDrawer(true);
    const last = localStorage.getItem(this._lastSeenKey);
    if(last && this._config.remember){
      const el = document.getElementById(last);
      if(el) setTimeout(()=> this._scrollToElement(el), 600);
    }
  }

  // check event target is inside shadow or host
  _shadowContains(target){
    const path = event && event.composedPath ? event.composedPath() : (target && target.composedPath ? target.composedPath() : []);
    return path.some(n => n === this || n === this._shadow.host);
  }

  // index full text (store simple index)
  _indexFullText(){
    if(!this._config.fullTextSearch) { this._fullIndex = []; return; }
    const main = document.querySelector('main') || document.body;
    const blocks = Array.from(main.querySelectorAll('p, li, h2, h3, h4, .lead, .desc, .price-image-container'));
    this._fullIndex = blocks.map(b => ({ el: b, text: (b.textContent||'').trim() }));
  }

  // destroy
  _destroy(){
    try{ if(this._observer) this._observer.disconnect(); }catch(e){}
    try{ if(this._mutObs) this._mutObs.disconnect(); }catch(e){}
    window.removeEventListener('keydown', this._onKeydown);
    window.removeEventListener('scroll', this._onScroll);
    window.removeEventListener('resize', this._onScroll);
    if(this._onScrollLazy) window.removeEventListener('scroll', this._onScrollLazy);
    if(this._speech) try{ this._speech.stop(); }catch(e){}
  }

}

// define custom element if not yet
if(!customElements.get('moto-toc')){
  customElements.define('moto-toc', MotoToc);
}

// auto mount if not present
if(!document.querySelector('moto-toc')){
  const el = document.createElement('moto-toc');
  // enable lazy if desired: el.setAttribute('data-lazy','true'); el.setAttribute('data-lazy-threshold','220');
  document.body.appendChild(el);
  // init (component will call init unless lazy)
  setTimeout(()=> { try{ el.init(); } catch(e){} }, 80);
}
</script>
</head>
<body>
  <header class="topbar" id="topbar" role="banner" aria-label="Trang điều hướng chính">
    <div class="brand" aria-hidden="false">
      <img src="https://i.postimg.cc/brsmsj5N/IMG-5215.jpg" alt="Motoopen logo">
      <h3>Motoopen</h3>
    </div>

    <nav class="nav-links" role="navigation" aria-label="Main navigation">
      <a href="https://motoopen.github.io/chothuexemayhanoi/"><i class="fa-solid fa-house"></i> Trang chủ</a>
      <a href="https://motoopen.github.io/chothuexemayhanoi/gioithieu.html"><i class="fa-solid fa-circle-info"></i> Giới thiệu</a>
      <div class="nav-dropdown">
        <a href="javascript:void(0);" class="dropdown-toggle">
          <i class="fa-solid fa-motorcycle"></i> Dịch vụ <i class="fa-solid fa-caret-down"></i>
        </a>
        <div class="dropdown-menu">
          <a href="https://motoopen.github.io/chothuexemayhanoi/banggia.html"><i class="fa-solid fa-tags"></i> Bảng giá</a>
          <a href="https://motoopen.github.io/chothuexemayhanoi/thutuc.html"><i class="fa-solid fa-file-signature"></i> Thủ tục</a>
          <a href="https://motoopen.github.io/chothuexemayhanoi/loaixe.html"><i class="fa-solid fa-motorcycle"></i> Loại xe</a>
          <a href="https://motoopen.github.io/chothuexemayhanoi/huongdan.html"><i class="fa-solid fa-book"></i> Hướng dẫn</a>
          <a href="https://motoopen.github.io/chothuexemayhanoi/kinhnghiem.html"><i class="fa-solid fa-lightbulb"></i> Kinh nghiệm</a>
        </div>
      </div>
      <a href="https://motoopen.github.io/chothuexemayhanoi/faq.html"><i class="fa-solid fa-circle-question"></i> FAQ</a>
      <a href="https://motoopen.github.io/chothuexemayhanoi/lienhe.html"><i class="fa-solid fa-phone"></i> Liên hệ</a>
      <a href="https://motoopen.github.io/chothuexemayhanoi/dieukhoansudung.html"><i class="fa-solid fa-file-contract"></i> Điều khoản</a>
      <a href="https://motoopen.github.io/chothuexemayhanoi/chinhsachbaomat.html"><i class="fa-solid fa-shield-halved"></i> Chính sách</a>
      
      <button class="toggle-dark" id="toggle-dark-desktop" aria-label="Chuyển đổi chế độ tối"></button>
    </nav>
    
    <button class="toggle-dark" id="toggle-dark-mobile" aria-label="Chuyển đổi chế độ tối"></button>
    <button class="hamburger" id="hamburger" aria-label="Mở menu" aria-expanded="false" aria-controls="drawer">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
  </header>

  <div class="drawer-overlay" id="drawerOverlay" aria-hidden="true"></div>
  
  <aside class="drawer" id="drawer" role="menu" aria-hidden="true">
    <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/" role="menuitem"><i class="fa-solid fa-house"></i> Trang chủ</a>
    <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/gioithieu.html" role="menuitem"><i class="fa-solid fa-circle-info"></i> Giới thiệu</a>
    
    <button type="button" class="icon drawer-accordion-toggle" id="drawer-service-toggle" aria-expanded="false" aria-controls="drawer-submenu">
      <span style="display: flex; align-items: center; gap: 12px;">
        <i class="fa-solid fa-motorcycle" style="width: 18px; text-align: center;"></i> DỊCH VỤ
      </span>
      <i class="fa-solid fa-chevron-down caret-icon"></i>
    </button>
    
    <div class="drawer-submenu" id="drawer-submenu" role="region" aria-labelledby="drawer-service-toggle">
      <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/banggia.html"><i class="fa-solid fa-tags"></i> Bảng giá</a>
      <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/thutuc.html"><i class="fa-solid fa-file-signature"></i> Thủ tục</a>
      <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/loaixe.html"><i class="fa-solid fa-motorcycle"></i> Loại xe</a>
      <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/huongdan.html"><i class="fa-solid fa-book"></i> Hướng dẫn</a>
      <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/kinhnghiem.html"><i class="fa-solid fa-lightbulb"></i> Kinh nghiệm</a>
    </div>
    <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/faq.html" role="menuitem" style="margin-top: 8px; border-top: 1px solid var(--glass-border); padding-top: 12px;"><i class="fa-solid fa-circle-question"></i> FAQ</a>
    <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/lienhe.html" role="menuitem"><i class="fa-solid fa-phone"></i> Liên hệ</a>
    <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/dieukhoansudung.html" role="menuitem"><i class="fa-solid fa-file-contract"></i> Điều khoản</a>
    <a class="icon" href="https://motoopen.github.io/chothuexemayhanoi/chinhsachbaomat.html" role="menuitem"><i class="fa-solid fa-shield-halved"></i> Chính sách</a>
    
<script>
(function() {
  const drawer = document.getElementById('drawer');
  if (!drawer) return;

  const toggleBtn = drawer.querySelector('#drawer-service-toggle');
  const submenu = drawer.querySelector('#drawer-submenu');

  if (toggleBtn && submenu) {
    toggleBtn.addEventListener('click', function() {
      const isOpen = submenu.classList.toggle('open');
      toggleBtn.classList.toggle('open', isOpen);
      toggleBtn.setAttribute('aria-expanded', String(isOpen));
    });
  }
})();
</script>
</aside>
  <main id="main" class="container" role="main">
    <section class="hero" id="gioithieu" aria-labelledby="hero-title">
      <div class="grad-layer" aria-hidden="true"></div>
      <div class="content">
        <div class="kicker">Motoopen</div>
        <h1 id="hero-title">Thuê Xe Máy Hà Nội — Giá Rẻ, Giao Tận Nơi</h1>

        <p class="lead">Dịch vụ cho thuê xe máy giá rẻ tại Hà Nội - Ưu đãi đặc biệt khi thuê theo tháng! Đa dạng dòng xe Honda, Yamaha, xe 50cc với mức cọc nhẹ nhàng. Giao xe tận nơi nhanh chóng, tiện lợi. Quy trình thuê đơn giản, xe chất lượng được bảo dưỡng định kỳ. Phục vụ 9:00 - 21:00. Liên hệ Zalo: 0857255868</p>

        <div class="hero-actions">
          <a class="btn primary" href="tel:0857255868" aria-label="Gọi ngay 0857 255 868"><i class="fa-solid fa-phone"></i> Gọi ngay</a>
          <a class="btn primary alt" href="https://zalo.me/0857255868" aria-label="Chat Zalo"><i class="fa-solid fa-comment-dots"></i> Chat Zalo</a>
          <a class="btn alt btn-scroll-down" href="#banggia" aria-label="Xem bảng giá">
            <i class="fa-solid fa-tag"></i> Bảng giá
          </a>
        </div>
      </div>
    </section>

    <section class="price-section reveal" id="banggia" aria-labelledby="price-title">
      <h2 id="price-title" class="slide-left">Bảng giá thuê xe máy Hà Nội</h2>
      <p style="color:var(--muted);margin:6px 0 8px" class="slide-right">Giá thuê xe máy từ 150k/ngày đến 200k/ngày. Giá tháng từ 1 triệu đến 2 triệu. Liên hệ để biết chi tiết.</p>

      <div class="price-table-wrap" role="table" aria-label="Bảng giá thuê xe">
        <table class="price-table" aria-hidden="false">
          <thead>
            <tr>
              <th>Loại Xe</th>
              <th>1 Ngày</th>
              <th>1 Tuần</th>
              <th>1 Tháng</th>
              <th>Đặt Cọc</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Xe số Honda Wave</td>
              <td>150k</td>
              <td>600k - 700k</td>
              <td>1.200k</td>
              <td>2 - 3 triệu</td>
            </tr>
            <tr>
              <td>Xe ga Honda Vision</td>
              <td>200k</td>
              <td>800k - 1.000k</td>
              <td>1.800k - 2.000k</td>
              <td>4 - 5 triệu</td>
            </tr>
            <tr>
              <td>Xe ga Air Blade</td>
              <td>200k</td>
              <td>800k</td>
              <td>1.400k</td>
              <td>3 triệu</td>
            </tr>
            <tr>
              <td>Xe ga giá rẻ (Click / Mio)</td>
              <td>150k</td>
              <td>600k - 700k</td>
              <td>1.000k - 1.200k</td>
              <td>2 triệu</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="price-image-container fade-up">
        <img class="price-image" src="https://i.postimg.cc/PrKmHvJX/IMG-5272.jpg" alt="Các loại xe máy cho thuê tại Motoopen" loading="lazy">
      </div>
      <p style="color:var(--muted);margin-top:12px" class="fade-up">Giá có thể biến động theo thời điểm. Liên hệ <a href="tel:0857255868">0857 255 868</a> (Zalo: 0857255868) để nhận báo giá chính xác và giao tận nơi tại Long Biên, Ba Đình, Hoàn Kiếm, Tây Hồ, Gia Lâm.</p>
    </section>

    <section id="slot-section">
      <h2>🎰 Quay để nhận giảm giá thuê xe máy Hà Nội</h2>
      <h3>Chơi ngay để nhận ưu đãi 25%! Quay là trúng nhưng phần thưởng không cộng dồn – chụp màn hình để giảm giá khi kí hợp đồng thuê xe máy của chúng tôi!</h3>

      <div id="slot">
        <div class="reel" id="reel1"><span>🏍️</span></div>
        <div class="reel" id="reel2"><span>🛞</span></div>
        <div class="reel" id="reel3"><span>🛢️</span></div>
      </div>

      <button id="spinBtn">🎯 Quay Slot</button>

      <div id="result"></div>
      <div id="reward">🎁 Giảm ngay 5% khi thuê xe tháng!</div>

      <canvas id="confetti-canvas" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;"></canvas>

      <script>
      const spinBtn = document.getElementById('spinBtn');
      const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
      const resultDiv = document.getElementById('result');
      const rewardDiv = document.getElementById('reward');
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;

      const symbols = ["🏍️","🛞","🛢️"];
      let confettiParticles = [];

      const spinSound = new Audio("https://raw.githubusercontent.com/motorbikenguyenha/chothuexemay50cc/refs/heads/main/asian-gong-music.mp3");
      const winSound = new Audio("https://raw.githubusercontent.com/motorbikenguyenha/chothuexemay50cc/refs/heads/main/notification_o14egLP.mp3");

      function spinReel(reel, duration){
        return new Promise(resolve=>{
          const span = reel.querySelector('span');
          const start = performance.now();
          spinSound.play();
          function animate(now){
            const elapsed = now - start;
            if(elapsed < duration){
              const index = Math.floor(Math.random() * symbols.length);
              span.textContent = symbols[index];
              reel.style.transform = `rotate(${Math.random()*20-10}deg)`; 
              requestAnimationFrame(animate);
            } else {
              const finalIndex = Math.floor(Math.random() * symbols.length);
              span.textContent = symbols[finalIndex];
              reel.style.transform = `rotate(0deg)`; 
              resolve(finalIndex);
            }
          }
          animate(performance.now());
        });
      }

      function createConfetti(){
        confettiParticles = [];
        for(let i=0;i<100;i++){
          confettiParticles.push({
            x: Math.random()*canvas.width,
            y: Math.random()*canvas.height - canvas.height,
            r: Math.random()*6+2,
            d: Math.random()*10+5,
            color: `hsl(${Math.random()*360}, 10%, 20%)`, // đen bóng nhẹ
            tilt: Math.random()*10-10,
            tiltAngleIncrement: Math.random()*0.07+0.05,
            tiltAngle: 0
          });
        }
      }

      function drawConfetti(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        confettiParticles.forEach((p)=>{
          ctx.beginPath();
          ctx.lineWidth = p.r;
          ctx.strokeStyle = p.color;
          ctx.moveTo(p.x + p.tilt + p.r/2, p.y);
          ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r/2);
          ctx.stroke();
          p.tiltAngle += p.tiltAngleIncrement;
          p.x += Math.sin(p.tiltAngle) * 2;
          p.y += Math.cos(p.tiltAngle + p.d) + 1;
          if(p.y > canvas.height){ p.y = -10; p.x = Math.random()*canvas.width; }
        });
        requestAnimationFrame(drawConfetti);
      }

      spinBtn.addEventListener('click', async ()=>{
        spinBtn.disabled = true;
        resultDiv.textContent = "";
        rewardDiv.style.display = "none";
        rewardDiv.style.transform = "scale(0)";
        
        const results = await Promise.all(reels.map((r,i)=>spinReel(r,4000 + i*1000)));
        const win = results.every(s => s === results[0]);

        if(win){
          winSound.play();
          rewardDiv.style.display = "block";
          setTimeout(()=>{ rewardDiv.style.transform = "scale(1.2)"; setTimeout(()=>rewardDiv.style.transform="scale(1)",200); },50);
          createConfetti();
          drawConfetti();
        }

        resultDiv.textContent = win ? `🎉 Chúc mừng! Bạn trúng ${results[0]}!` : `😅 Thua rồi, thử lại nhé!`;
        spinBtn.disabled = false;
      });
      </script>
    </section>

<section id="quiz-wrapper-new" style="padding:60px 20px;max-width:600px;margin:auto;text-align:center;font-family:'Inter',sans-serif;transition:background 0.6s,color 0.6s;">
  <h2 style="font-size:1.8rem;font-weight:600;margin-bottom:25px;animation:fadeIn 0.9s ease;">🧭 Trắc nghiệm chọn xe phù hợp</h2>

  <div id="quiz-container-new">
    <div class="question-new active" style="animation:fadeIn 0.9s ease;">
      <p style="font-size:1.1rem;margin-bottom:15px;">1️⃣ Bạn thuê xe để làm gì?</p>
      <button class="answer-new">Đi làm / Đi học</button>
      <button class="answer-new">Đi chơi / Đi dạo</button>
      <button class="answer-new">Đi xa / Phượt</button>
    </div>

    <div class="question-new">
      <p style="font-size:1.1rem;margin-bottom:15px;">2️⃣ Bạn thích loại xe nào?</p>
      <button class="answer-new">Xe số</button>
      <button class="answer-new">Xe tay ga</button>
      <button class="answer-new">Xe điện</button>
    </div>

    <div class="question-new">
      <p style="font-size:1.1rem;margin-bottom:15px;">3️⃣ Bạn thường đi mấy người?</p>
      <button class="answer-new">1 người</button>
      <button class="answer-new">2 người</button>
    </div>
  </div>

  <div id="quiz-result-new" style="display:none;animation:fadeIn 0.9s ease; transform: scale(0); padding:20px; border-radius:15px; box-shadow:0 4px 12px rgba(0,0,0,0.15); transition: transform 0.4s, box-shadow 0.4s;">
    <h3 id="bike-result-new" style="margin:20px 0;font-size:1.4rem;font-weight:600;"></h3>
    <a href="https://zalo.me/0857255868" target="_blank" 
       style="display:inline-block;background:#4285F4;color:#fff;padding:12px 24px;border-radius:8px;font-weight:600;text-decoration:none;transition:all 0.3s;">
       💬 Liên hệ Zalo 0857255868
    </a>
  </div>

  <style>
    @keyframes fadeIn { from {opacity:0;transform:translateY(10px);} to {opacity:1;transform:translateY(0);} }

    #quiz-wrapper-new button.answer-new,
    #quiz-wrapper-new a {
      display:block;
      width:100%;
      margin:10px 0;
      padding:14px 15px;
      border:none;
      border-radius:12px;
      background:#4285F4;
      color:#fff;
      font-size:1rem;
      cursor:pointer;
      font-weight:500;
      box-shadow:0 2px 6px rgba(66, 133, 244, 0.4);
      transition:all 0.3s;
      animation:fadeIn 0.9s ease;
    }

    #quiz-wrapper-new button.answer-new:hover,
    #quiz-wrapper-new a:hover {
      transform: scale(1.03);
      box-shadow:0 0 15px rgba(66, 133, 244, 0.6);
    }

    /* Dark mode */
    body.dark #quiz-wrapper-new { background:var(--bg); color:var(--text); }
    body.dark #quiz-wrapper-new button.answer-new,
    body.dark #quiz-wrapper-new a {
        background:var(--accent);
        color:#fff;
        box-shadow:0 2px 6px rgba(10, 132, 255, 0.5);
    }
    body.dark #quiz-wrapper-new button.answer-new:hover,
    body.dark #quiz-wrapper-new a:hover {
        box-shadow:0 0 15px rgba(10, 132, 255, 0.8);
    }

    /* Mobile tối ưu */
    @media (max-width:480px) {
      #quiz-wrapper-new h2 { font-size:1.5rem; }
      #quiz-wrapper-new button.answer-new { font-size:0.95rem; padding:12px 14px; }
      #quiz-wrapper-new a { padding:10px 20px; font-size:0.95rem; }
    }
  </style>

  <script>
    const questionsNew = document.querySelectorAll('#quiz-container-new .question-new');
    let currentQuestionNew = 0;
    let answersNew = [];

    document.querySelectorAll('#quiz-container-new .answer-new').forEach(btn => {
      btn.addEventListener('click', () => {
        answersNew.push(btn.textContent);
        questionsNew[currentQuestionNew].style.display = 'none';
        currentQuestionNew++;
        if (currentQuestionNew < questionsNew.length) {
          questionsNew[currentQuestionNew].style.display = 'block';
        } else {
          showResultNew();
        }
      });
    });

    function showResultNew() {
      const result = document.getElementById('quiz-result-new');
      const text = document.getElementById('bike-result-new');
      let suggestion = '';
      const [purpose, type, people] = answersNew;

      if (type === 'Xe điện') suggestion = '⚡🛵 Xe điện – tiện lợi và tiết kiệm trong phố.';
      else if (type === 'Xe tay ga') {
        if (purpose.includes('làm')) suggestion = '🛴 Honda Vision – nhỏ gọn, bền, dễ đi.';
        else if (purpose.includes('xa')) suggestion = '🛵✨ Honda Air Blade – mạnh mẽ, ổn định khi đi xa.';
        else suggestion = '🏁 Xe ga 50cc – tiện cho người mới hoặc đi gần.';
      } else if (type === 'Xe số') {
        if (purpose.includes('xa')) suggestion = '🏍️ Honda Wave – bền, tiết kiệm xăng, phù hợp đi phượt.';
        else suggestion = '🛵 Yamaha Sirius – nhỏ gọn, tiện đi học & đi làm.';
      } else suggestion = '🛴 Honda Vision – lựa chọn an toàn và phổ biến.';

      text.textContent = `🚘 Xe phù hợp với bạn là: ${suggestion}`;
      result.style.display = 'block';
      result.style.transform = 'scale(1.05)';
      setTimeout(() => result.style.transform = 'scale(1)', 300);
    }
  </script>
</section>
    
    <section class="reviews-section" id="danhgia" aria-labelledby="review-title">
      <div class="reviews-bg" id="reviewsBg" aria-hidden="true"></div>
      <div class="reviews-overlay" aria-hidden="true"></div>

      <div class="reviews-wrap">
        <h2 id="review-title" class="slide-left">Khách hàng tại Hà Nội nói gì</h2>
        <div class="review-cards" aria-live="polite">
          <div class="review-card slide-from-left fade-up">
            <p>“Thuê xe Vision 3 ngày, xe chạy êm — giao tận nơi phố cổ nhanh, phí nhẹ.”</p>
            <div class="author">— <strong>Thu Hà</strong> · Phố Cổ</div>
          </div>

          <div class="review-card slide-from-right fade-up">
            <p>“Giá thuê xe máy hợp lý, cọc nhẹ, nhân viên thân thiện. Ở Long Biên rất tiện.”</p>
            <div class="author">— <strong>Quang Lâm</strong> · Long Biên</div>
          </div>

          <div class="review-card slide-from-left fade-up">
            <p>“Mình thuê xe ga theo tháng ở Tây Hồ — giá tốt, xe mới, bảo dưỡng kỹ.”</p>
            <div class="author">— <strong>Gia Nội</strong> · Tây Hồ</div>
          </div>

          <div class="review-card slide-from-right fade-up">
            <p>“Thuê xe máy Hà Nội dễ, nhận xe nhanh, giao tận nơi đúng giờ — rất đáng tiền.”</p>
            <div class="author">— <strong>Lan Tây</strong> · Ba Đình</div>
          </div>

          <div class="review-card slide-from-left fade-up">
            <p>“Giá thuê xe máy 150k/ngày, thuê tháng từ 1 triệu — quá hợp lý, xe cực mới.”</p>
            <div class="author">— <strong>Hồ Đức</strong> · Hoàn Kiếm</div>
          </div>
        </div>
      </div>
    </section>

    <section class="reveal faq" id="faq" aria-labelledby="faq-title">
      <h2 id="faq-title" class="slide-right">Câu hỏi thường gặp</h2>

      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Giá thuê xe máy theo ngày Hà Nội bao nhiêu?</div><div class="sign">+</div>
      </div>
      <div class="a">Giá thuê xe máy từ <strong>150k</strong> đến <strong>200k/ngày</strong>, tùy loại xe.</div>

      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Giá thuê xe máy theo tuần?</div><div class="sign">+</div>
      </div>
      <div class="a">Giá thuê 1 tuần thường khoảng <strong>600k – 900k</strong> tuỳ loại xe và thời điểm.</div>

      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Giá thuê xe máy tháng bao nhiêu?</div><div class="sign">+</div>
      </div>
      <div class="a">Giá thuê theo tháng khá rẻ: <strong>từ 1 triệu đến 2 triệu/tháng</strong>, phù hợp khách thuê dài hạn.</div>
      
      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Thủ tục thuê xe máy là gì?</div><div class="sign">+</div>
      </div>
      <div class="a">Đặt cọc: từ <strong>1 triệu đến 5 triệu</strong> tùy loại xe; CMND/CCCD hoặc hộ chiếu, hợp đồng thuê đơn giản, giao xe tận nơi nếu cần.</div>

      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Thuê xe máy Hà Nội có giao tận nơi không?</div><div class="sign">+</div>
      </div>
      <div class="a">Có — giao quanh khu vực Hà Nội: Phố Cổ, Hoàn Kiếm, Long Biên, Gia Lâm, Tây Hồ, Ba Đình. Không giao đến sân bay Nội Bài. Có tính phí giao nhưng nhanh và tiện.</div>

      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Thuê xe máy có cần bằng lái không?</div><div class="sign">+</div>
      </div>
      <div class="a">Nếu không có bằng lái, chúng tôi có phương án: xe 50cc giá rẻ hoặc xe điện (tùy khu vực). Tuy nhiên, xin lưu ý luật giao thông địa phương.</div>

      <div tabindex="0" class="q fade-up" role="button" aria-expanded="false">
        <div>Giá thuê xe máy theo loại phổ biến?</div><div class="sign">+</div>
      </div>
      <div class="a">Xe số: ~150k/ngày; Xe ga (Vision/AirBlade): ~200k/ngày. Thuê tháng: 1 triệu – 2 triệu. Liên hệ để báo giá chính xác.</div>
    </section>
    
  </main>

  <footer class="premium">
  <div>
    <h4>Trang</h4>
    <a href="https://motoopen.github.io/chothuexemayhanoi/"><i class="fa-solid fa-house"></i> Trang chủ</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/gioithieu.html"><i class="fa-solid fa-circle-info"></i> Giới thiệu</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/banggia.html"><i class="fa-solid fa-tags"></i> Bảng giá</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/dichvu.html"><i class="fa-solid fa-briefcase"></i> Dịch vụ</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/faq.html"><i class="fa-solid fa-circle-question"></i> FAQ</a>
  </div>

  <div>
    <h4>Dịch vụ</h4>
    <a href="https://motoopen.github.io/chothuexemayhanoi/thutuc.html"><i class="fa-solid fa-file-signature"></i> Thủ tục</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/loaixe.html"><i class="fa-solid fa-motorcycle"></i> Loại xe</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/huongdan.html"><i class="fa-solid fa-book"></i> Hướng dẫn</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/kinhnghiem.html"><i class="fa-solid fa-lightbulb"></i> Kinh nghiệm</a>
  </div>
  <div>
  <h4>Liên hệ</h4>
  <a href="tel:0857255868"><i class="fa-solid fa-phone"></i> 0857 255 868</a>
  <a href="https://zalo.me/0857255868" target="_blank"><i class="fa-solid fa-comment-dots"></i> Chat Zalo</a>
  <a href="mailto:motoopen12@gmail.com"><i class="fa-solid fa-envelope"></i> Email</a>
  <a href="lienhe.html"><i class="fa-solid fa-address-book"></i> Form Liên hệ</a>
  <a href="https://www.google.com/maps/place/114+Nguyễn+Văn+Cừ,+Long+Biên,+Hà+Nội" target="_blank">
    <i class="fa-solid fa-location-dot"></i> Đến ngay
  </a>
  </div>

  <div>
    <h4>Thông tin</h4>
    <a href="https://motoopen.github.io/chothuexemayhanoi/dieukhoansudung.html"><i class="fa-solid fa-file-contract"></i> Điều khoản</a>
    <a href="https://motoopen.github.io/chothuexemayhanoi/chinhsachbaomat.html"><i class="fa-solid fa-shield-halved"></i> Chính sách bảo mật</a>
  </div>

  <div>
    <h4>Kết nối</h4>
    <div class="footer-social">
      <a href="https://m.facebook.com/motoopenvn/" target="_blank" title="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/motoopen/" target="_blank" title="Instagram"><i class="fa-brands fa-instagram"></i></a>
      <a href="https://www.pinterest.com/motoopen12/" target="_blank" title="Pinterest"><i class="fa-brands fa-pinterest"></i></a>
    </div>
    
    <p class="author" style="margin-top: 6px;">
  <i class="fa-solid fa-copyright"></i> 2025 
  <a href="https://motoopen.github.io/appthuexemay/" target="_blank">@ Motoopen</a> – Cho thuê xe máy Hà Nội. All Rights Reserved.
</p>
  <div class="footer-tagline">
    <div class="inner">
      <img src="https://i.postimg.cc/brsmsj5N/IMG-5215.jpg" alt="Motoopen xe">
      Thuê xe máy Hà Nội - Motoopen - giao tận nơi - cọc nhẹ ✨
    </div>
  </div>
</footer>
  <div class="quick-call-game">
    <button class="quick-main" aria-label="Mở menu gọi nhanh" title="Menu gọi nhanh">
      <i class="fa-solid fa-phone"></i>
    </button>
    <div class="quick-sub">
      <a href="tel:0857255868" aria-label="Gọi ngay 0857 255 868" title="Gọi ngay: 0857 255 868"><i class="fa-solid fa-phone"></i></a>
      <a href="https://zalo.me/0857255868" target="_blank" aria-label="Chat Zalo 0857255868" title="Chat Zalo: 0857255868"><i class="fa-solid fa-comment-dots"></i></a>
      <a href="https://maps.app.goo.gl/dTLAo1aHMvytByf99?g_st=ipc" target="_blank" aria-label="Bản đồ" title="Địa chỉ: 114 Nguyễn Văn Cừ"><i class="fa-solid fa-location-dot"></i></a>
    </div>
  </div>

  <div class="back-top" title="Back to Top">
    <i class="fa-solid fa-arrow-up"></i>
  </div>

  <script>
    (function(){
      // Elements
      const topbar = document.getElementById('topbar');
      const hamburger = document.getElementById('hamburger');
      const drawer = document.getElementById('drawer');
      const overlay = document.getElementById('drawerOverlay');
      const reviewsBg = document.getElementById('reviewsBg');
      const backTop = document.querySelector('.back-top');
      
      // === CẬP NHẬT: DARK MODE LOGIC ===
      const body = document.body;
      const DARK_MODE_KEY = 'darkModeEnabled';
      const desktopToggle = document.getElementById('toggle-dark-desktop');
      const mobileToggle = document.getElementById('toggle-dark-mobile');

      function applyDarkMode(enabled){
        if(enabled){
          body.classList.add('dark');
          localStorage.setItem(DARK_MODE_KEY,'true');
        } else {
          body.classList.remove('dark');
          localStorage.setItem(DARK_MODE_KEY,'false');
        }
        updateIcons(enabled);
      }

      function updateIcons(enabled){
        const sun = '<i class="fa-solid fa-sun"></i>';
        const moon = '<i class="fa-solid fa-moon"></i>';
        const icon = enabled ? sun : moon;
        if(desktopToggle) desktopToggle.innerHTML = icon;
        if(mobileToggle) mobileToggle.innerHTML = icon;
      }

      // Load preference
      let darkEnabled = localStorage.getItem(DARK_MODE_KEY);
      if(darkEnabled===null){
        darkEnabled = window.matchMedia('(prefers-color-scheme:dark)').matches;
      } else {
        darkEnabled = darkEnabled === 'true';
      }
      applyDarkMode(darkEnabled);

      [desktopToggle, mobileToggle].forEach(btn=>{
        if(btn){
          btn.addEventListener('click',()=>{
            applyDarkMode(!body.classList.contains('dark'));
          });
        }
      });
      // === KẾT THÚC CẬP NHẬT DARK MODE ===


      // 1) Prevent overlap: set body padding-top to nav height (calibrated)
      function setBodyTopPadding(){
        const navRect = topbar.getBoundingClientRect();
        const height = navRect.height + 10; // small gap
        document.body.style.paddingTop = height + 'px';
      }
      setBodyTopPadding();
      window.addEventListener('resize', () => requestAnimationFrame(setBodyTopPadding));

      // 2) Drawer open/close logic
      function openDrawer(open){
        if(open){
          drawer.classList.add('open');
          overlay.classList.add('active');
          drawer.setAttribute('aria-hidden','false');
          hamburger.classList.add('active');
          hamburger.setAttribute('aria-expanded','true');
        } else {
          drawer.classList.remove('open');
          overlay.classList.remove('active');
          drawer.setAttribute('aria-hidden','true');
          hamburger.classList.remove('active');
          hamburger.setAttribute('aria-expanded','false');
        }
      }
      hamburger.addEventListener('click', ()=> openDrawer(!drawer.classList.contains('open')));
      overlay.addEventListener('click', ()=> openDrawer(false));
      
      // close drawer when clicking a link inside (NGOẠI TRỪ NÚT ACCORDION)
      drawer.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', ()=> openDrawer(false));
      });
      // Logic cho nút accordion đã được thêm riêng trong <aside>
      // nên không cần thêm vào đây

      // 3) Scroll effects: nav style and parallax background
      let lastY = window.scrollY || 0;
      let ticking = false;
      function onScroll(){
        lastY = window.scrollY || 0;
        if(!ticking){
          requestAnimationFrame(()=> {
            handleScroll(lastY);
            ticking = false;
          });
          ticking = true;
        }
      }
      function handleScroll(y){
        if(y > 8) topbar.classList.add('scrolled'); else topbar.classList.remove('scrolled');
        if(y > 300 && backTop) backTop.style.display = 'flex'; else if(backTop) backTop.style.display = 'none'; // Hiển thị/Ẩn Back to Top

        // small parallax for reviews background (move slower)
        if(reviewsBg){
          // apply small translate based on page offset
          const rect = reviewsBg.parentElement.getBoundingClientRect();
          const center = (rect.top + rect.bottom) / 2;
          const winCenter = window.innerHeight / 2;
          const diff = (winCenter - center) * 0.06; // softer
          reviewsBg.style.transform = `translateY(${diff}px)`;
        }
      }
      window.addEventListener('scroll', onScroll, {passive:true});
      handleScroll(window.scrollY || 0);

      // 4) Reveal & reviews cards animation with IntersectionObserver
      const motionObserver = new IntersectionObserver((entries, obs) => {
        entries.forEach(en => {
          if(en.isIntersecting){
            en.target.classList.add('visible');
            obs.unobserve(en.target);
          }
        });
      }, {threshold:0.12});

      // Targets: .reveal, .fade-up, .slide-left, .slide-right
      document.querySelectorAll('.reveal, .fade-up, .slide-left, .slide-right').forEach(el => motionObserver.observe(el));

      // 5) FAQ accordion behavior with keyboard support
      const faqs = document.querySelectorAll('.faq .q');
      faqs.forEach(q => {
        q.addEventListener('click', () => toggleFaq(q));
        q.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleFaq(q); }
        });
      });
      function toggleFaq(q){
        const next = q.nextElementSibling;
        const expanded = q.getAttribute('aria-expanded') === 'true';
        if(next){
          if(expanded){
            next.classList.remove('open');
            q.setAttribute('aria-expanded','false');
            q.querySelector('.sign').textContent = '+';
          } else {
            next.classList.add('open');
            q.setAttribute('aria-expanded','true');
            q.querySelector('.sign').textContent = '−';
          }
        }
      }

      // 6) Respect reduced motion
      if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
        document.querySelectorAll('*').forEach(n => n.style.transition = 'none');
      }

      // accessibility: esc closes drawer
      window.addEventListener('keydown', (e) => {
        if(e.key === 'Escape') openDrawer(false);
      });

      // tiny improvement: smooth scroll for internal links with offset (nav height)
      // *** ĐÃ TẮT TÍNH NĂNG NÀY ĐỂ ƯU TIÊN LINK ĐA TRANG ***
      // document.querySelectorAll('a[href^="#"]').forEach(a=>{
      //   a.addEventListener('click', (e)=>{
      //     const href = a.getAttribute('href');
      //     if(href.length > 1 && document.querySelector(href)){
      //       e.preventDefault();
      //       const navHeight = topbar.getBoundingClientRect().height + 8;
      //       const targetTop = document.querySelector(href).offsetTop - navHeight;
      //       window.scrollTo({top: targetTop, behavior:'smooth'});
      //     }
      //   });
      // });

      // ** Quick Call Menu logic NÂNG CẤP **
      const quickGame = document.querySelector('.quick-call-game');
      const mainBtn = document.querySelector('.quick-call-game .quick-main');
      
      // Lấy giá trị bottom mặc định cho Back to Top
      const getBackTopDefaultBottom = () => window.matchMedia('(max-width: 520px)').matches ? 80 : 90; 
      const getBackTopOpenBottom = () => window.matchMedia('(max-width: 520px)').matches ? 220 : 230; 

      function updateBackTopPosition(isOpen) {
          if (!backTop) return;
          if (isOpen) {
              backTop.style.bottom = getBackTopOpenBottom() + 'px'; // Đẩy lên khi menu mở
          } else {
              backTop.style.bottom = getBackTopDefaultBottom() + 'px'; // Vị trí mặc định
          }
      }
      
      if (quickGame && mainBtn) {
          mainBtn.addEventListener('click', (e) => {
              e.stopPropagation(); // Ngăn chặn sự kiện click lan truyền đến document
              const isOpen = quickGame.classList.toggle('open');
              updateBackTopPosition(isOpen);
          });

          // Tự động đóng menu khi click ra ngoài
          document.addEventListener('click', (e) => {
              if (!quickGame.contains(e.target) && quickGame.classList.contains('open')) {
                  quickGame.classList.remove('open');
                  updateBackTopPosition(false);
              }
          });

          // Đóng menu khi click vào một nút con
          document.querySelectorAll('.quick-call-game .quick-sub a').forEach(a => {
              a.addEventListener('click', () => {
                  setTimeout(() => {
                    quickGame.classList.remove('open');
                    updateBackTopPosition(false);
                  }, 100); 
              });
          });
      }


      // ** Back to top logic **
      if (backTop) {
        backTop.addEventListener('click', () => window.scrollTo({top:0,behavior:'smooth'}));
      }
      
    })();
  </script>
<script src="https://cdn.jsdelivr.net/gh/motoopen/chothuexemayhanoi@main/motoai_autoload.js" defer></script>
</body>
</html>
